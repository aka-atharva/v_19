(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{3667:(e,t,s)=>{Promise.resolve().then(s.bind(s,5019))},5019:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eT});var a=s(5155),r=s(425),n=s(4110),i=s(2115),l=s(8173),o=s.n(l),c=s(602),d=s(6062),m=s(7401);let u=(0,m.A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var h=s(6745);let x=(0,m.A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var p=s(8236),g=s(7364),f=s(1069),b=s(6046);async function j(){try{let e="http://localhost:9595/api",t=localStorage.getItem("token"),s={Authorization:"Bearer ".concat(t),Accept:"application/json","Content-Type":"application/json"},a=await fetch("".concat(e,"/admin/stats"),{headers:s}),r=await fetch("".concat(e,"/admin/users"),{headers:s}),n=[];try{let t=new Date().getTime(),a=await fetch("".concat(e,"/admin/activity?limit=50&_t=").concat(t),{headers:s});if(!a.ok)throw Error("Failed to fetch activity logs: ".concat(a.statusText));n=await a.json(),console.log("Fetched activity data:",n),n=n.map(e=>({...e,username:e.username||"anonymous"}))}catch(e){console.error("Error fetching activity logs:",e),n=[{id:1,action:"User login",username:"admin",timestamp:new Date().toISOString(),details:"Activity log system initialized with fallback data",page_url:null}]}let i=await fetch("".concat(e,"/admin/settings"),{headers:s});if(!a.ok||!r.ok||!i.ok)throw Error("Failed to fetch admin data");let l=await a.json(),o=await r.json(),c=await i.json();return{stats:l,users:o,activity:n,systemSettings:c}}catch(e){return console.error("Error fetching admin data:",e),{stats:{total_users:42,active_users:38,researchers:15,regular_users:26,system_uptime:"3 days, 7 hours",database_size:"42.5 MB"},users:[{id:1,username:"admin",email:"admin@example.com",role:"admin",is_active:!0,created_at:new Date().toISOString()},{id:2,username:"researcher",email:"researcher@example.com",role:"researcher",is_active:!0,created_at:new Date(Date.now()-864e5).toISOString()},{id:3,username:"user",email:"user@example.com",role:"user",is_active:!0,created_at:new Date(Date.now()-1728e5).toISOString()}],activity:[{id:1,action:"Login",username:"admin",timestamp:new Date().toISOString(),details:"User admin logged in successfully",page_url:null},{id:2,action:"Page visit",username:"researcher",timestamp:new Date(Date.now()-9e5).toISOString(),details:"Visited dashboard page",page_url:"/datapuur/dashboard"},{id:3,action:"Failed login attempt",username:"unknown",timestamp:new Date(Date.now()-18e5).toISOString(),details:"Invalid credentials",page_url:null}],systemSettings:{maintenance_mode:!1,debug_mode:!0,api_rate_limiting:!0,last_backup:new Date(Date.now()-864e5).toISOString()}}}}async function v(e){try{let t=localStorage.getItem("token"),s=await fetch("".concat("http://localhost:9595/api","/admin/users"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){let e=await s.json();throw Error(e.detail||"Failed to create user")}let a=await s.json();return a.created_at||(a.created_at=new Date().toISOString()),a}catch(e){throw console.error("Error creating user:",e),e}}async function y(e,t){try{let s=localStorage.getItem("token"),a=await fetch("".concat("http://localhost:9595/api","/admin/users/").concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(s),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){let e=await a.json();throw Error(e.detail||"Failed to update user")}return await a.json()}catch(e){throw console.error("Error updating user:",e),e}}async function N(e){try{let t=localStorage.getItem("token"),s=await fetch("".concat("http://localhost:9595/api","/admin/users/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t),Accept:"application/json","Content-Type":"application/json"}});if(!s.ok){let e=await s.json();throw Error(e.detail||"Failed to delete user")}return}catch(e){throw console.error("Error deleting user:",e),e}}async function w(e,t){try{let s=localStorage.getItem("token"),a=await fetch("".concat("http://localhost:9595/api","/admin/settings"),{method:"PUT",headers:{Authorization:"Bearer ".concat(s),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({[e]:t})});if(!a.ok){let e=await a.json();throw Error(e.detail||"Failed to update system setting")}return await a.json()}catch(e){throw console.error("Error updating system setting:",e),e}}async function k(){try{let e=localStorage.getItem("token"),t=await fetch("".concat("http://localhost:9595/api","/admin/backup"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),Accept:"application/json","Content-Type":"application/json"}});if(!t.ok){let e=await t.json();throw Error(e.detail||"Failed to run backup")}return await t.json()}catch(e){throw console.error("Error running backup:",e),e}}async function C(){try{let e=localStorage.getItem("token"),t=await fetch("".concat("http://localhost:9595/api","/admin/export-data"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),Accept:"application/json","Content-Type":"application/json"}});if(!t.ok){let e=await t.json();throw Error(e.detail||"Failed to export data")}return await t.json()}catch(e){throw console.error("Error exporting data:",e),e}}async function A(e){try{let t=localStorage.getItem("token"),s=await fetch("".concat("http://localhost:9595/api","/admin/activity/clear").concat(e?"?days=".concat(e):""),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t),Accept:"application/json","Content-Type":"application/json"}});if(!s.ok){let e=await s.json();throw Error(e.detail||"Failed to clear activity logs")}return}catch(e){throw console.error("Error clearing activity logs:",e),e}}async function S(){try{let e=localStorage.getItem("token"),t=await fetch("".concat("http://localhost:9595/api","/admin/cleanup-data"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),Accept:"application/json","Content-Type":"application/json"}});if(!t.ok){let e=await t.json();throw Error(e.detail||"Failed to cleanup data")}return await t.json()}catch(e){throw console.error("Error cleaning up data:",e),e}}var E=s(5472);let _=e=>{let t;let s=new Set,a=(e,a)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=a?a:"object"!=typeof r||null===r)?r:Object.assign({},t,r),s.forEach(s=>s(t,e))}},r=()=>t,n={setState:a,getState:r,getInitialState:()=>i,subscribe:e=>(s.add(e),()=>s.delete(e))},i=t=e(a,r,n);return n},F=e=>e?_(e):_,D=e=>e,R=e=>{let t=F(e),s=e=>(function(e,t=D){let s=i.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return i.useDebugValue(s),s})(t,e);return Object.assign(s,t),s},T=(e=>e?R(e):R)((e,t)=>({loading:!0,setLoading:t=>e({loading:t}),error:null,setError:t=>e({error:t}),notification:null,setNotification:t=>e({notification:t}),stats:null,setStats:t=>e({stats:t}),users:[],setUsers:t=>e({users:t}),activity:[],setActivity:t=>e({activity:t}),systemSettings:null,setSystemSettings:t=>e({systemSettings:t}),roles:[{id:1,name:"admin",description:"Full access to all system features and settings.",permissions:["user_management","system_settings","data_management","activity_logs"]},{id:2,name:"researcher",description:"Access to research tools and data analysis features.",permissions:["datapuur","kginsights","data_management"]},{id:3,name:"user",description:"Basic access to application features.",permissions:["view_reports","personal_settings"]},{id:4,name:"view",description:"View-only access to application features.",permissions:["view_reports"]}],setRoles:t=>e({roles:t}),availablePermissions:[{id:"user_management",name:"User Management"},{id:"system_settings",name:"System Settings"},{id:"data_management",name:"Data Management"},{id:"activity_logs",name:"Activity Logs"},{id:"datapuur",name:"DataPuur Access"},{id:"kginsights",name:"KGInsights Access"},{id:"view_reports",name:"View Reports"},{id:"personal_settings",name:"Personal Settings"}],setAvailablePermissions:t=>e({availablePermissions:t}),isProcessing:!1,setIsProcessing:t=>e({isProcessing:t}),addRoleIfNotExists:(s,a)=>{let{roles:r}=t();if(!r.some(e=>e.name===s)){let t={id:r.length+1,name:s,description:a||"Auto-created role: ".concat(s),permissions:["view_reports"]};e({roles:[...r,t]}),console.log("Added missing role: ".concat(s))}}}));var P=s(1476);function I(){let{stats:e,activity:t}=T(),s={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return e?(0,a.jsxs)(c.P.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"System Overview"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)(c.P.div,{variants:s,whileHover:{scale:1.02},className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border shadow-md hover:shadow-lg transition-shadow duration-300",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-foreground mb-4 flex items-center",children:[(0,a.jsx)(u,{className:"h-5 w-5 mr-2 text-primary"}),"User Statistics"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Total Users:"}),(0,a.jsx)("span",{className:"text-foreground font-medium",children:(null==e?void 0:e.total_users)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Active Users:"}),(0,a.jsx)("span",{className:"text-foreground font-medium",children:(null==e?void 0:e.active_users)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Researchers:"}),(0,a.jsx)("span",{className:"text-foreground font-medium",children:(null==e?void 0:e.researchers)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Regular Users:"}),(0,a.jsx)("span",{className:"text-foreground font-medium",children:(null==e?void 0:e.regular_users)||0})]})]})]}),(0,a.jsxs)(c.P.div,{variants:s,whileHover:{scale:1.02},className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border shadow-md hover:shadow-lg transition-shadow duration-300",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-foreground mb-4 flex items-center",children:[(0,a.jsx)(P.A,{className:"h-5 w-5 mr-2 text-secondary"}),"System Status"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Uptime:"}),(0,a.jsx)("span",{className:"text-foreground font-medium",children:(null==e?void 0:e.system_uptime)||"N/A"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Database Size:"}),(0,a.jsx)("span",{className:"text-foreground font-medium",children:(null==e?void 0:e.database_size)||"N/A"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Status:"}),(0,a.jsx)("span",{className:"text-primary font-medium",children:"Operational"})]})]})]}),(0,a.jsxs)(c.P.div,{variants:s,whileHover:{scale:1.02},className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border shadow-md hover:shadow-lg transition-shadow duration-300",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-foreground mb-4 flex items-center",children:[(0,a.jsx)(h.A,{className:"h-5 w-5 mr-2 text-primary"}),"Recent Activity"]}),t&&t.length>0?(0,a.jsx)("div",{className:"space-y-3",children:t.slice(0,3).map((e,t)=>(0,a.jsxs)(c.P.div,{variants:e,className:"text-sm p-2 rounded-md bg-background/50 hover:bg-background transition-colors",children:[(0,a.jsx)("div",{className:"text-foreground font-medium",children:e.action}),(0,a.jsxs)("div",{className:"text-muted-foreground text-xs",children:[new Date(e.timestamp).toLocaleString()," - ",e.username]})]},e.id||t))}):(0,a.jsx)("p",{className:"text-muted-foreground",children:"No recent activity"})]})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"System Overview"}),(0,a.jsx)("div",{className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading system statistics..."})})]})}let L=(0,m.A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var O=s(4085),U=s(1773),z=s(7837),J=s(2336),M=s(5785),q=s(2581),$=s(745);function B(e){let{open:t,onOpenChange:s,user:r}=e,{users:n,setUsers:l,isProcessing:o,setIsProcessing:c,setNotification:d,addRoleIfNotExists:m}=T(),[u,h]=(0,i.useState)({username:r.username,email:r.email,role:r.role,is_active:r.is_active}),{roles:x}=T();(0,i.useEffect)(()=>{r.role&&m(r.role)},[r.role,m]);let p=async()=>{c(!0);try{m(u.role);let e=await y(r.id,u);l(n.map(t=>t.id===e.id?e:t)),d({type:"success",message:"User ".concat(e.username," updated successfully")}),s(!1),setTimeout(()=>d(null),3e3)}catch(e){console.error("Error updating user:",e),d({type:"error",message:e.message||"Failed to update user"}),setTimeout(()=>d(null),3e3)}finally{c(!1)}};return(0,a.jsx)(z.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(z.Cf,{className:"bg-card border border-border text-card-foreground",children:[(0,a.jsx)(z.c7,{children:(0,a.jsx)(z.L3,{children:"Edit User"})}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(M.J,{htmlFor:"username",children:"Username"}),(0,a.jsx)(J.p,{id:"username",value:u.username,onChange:e=>h({...u,username:e.target.value}),className:"bg-background border-input text-foreground",disabled:"admin"===r.username})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(M.J,{htmlFor:"email",children:"Email"}),(0,a.jsx)(J.p,{id:"email",value:u.email,onChange:e=>h({...u,email:e.target.value}),className:"bg-background border-input text-foreground"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(M.J,{htmlFor:"role",children:"Role"}),(0,a.jsxs)($.l6,{value:u.role,onValueChange:e=>h({...u,role:e}),disabled:"admin"===r.username,children:[(0,a.jsx)($.bq,{className:"bg-background border-input text-foreground",children:(0,a.jsx)($.yv,{placeholder:"Select a role"})}),(0,a.jsx)($.gC,{className:"bg-popover border border-border text-popover-foreground",children:x.map(e=>(0,a.jsx)($.eb,{value:e.name,children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(q.d,{id:"is_active",checked:u.is_active,onCheckedChange:e=>h({...u,is_active:e}),disabled:"admin"===r.username}),(0,a.jsx)(M.J,{htmlFor:"is_active",children:"Active"})]})]}),(0,a.jsxs)(z.Es,{children:[(0,a.jsx)(O.$,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,a.jsx)(O.$,{className:"bg-violet-600 hover:bg-violet-700 text-white btn-glow",onClick:p,disabled:o,children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.A,{className:"h-3 w-3 mr-1 animate-spin text-white"}),"Saving..."]}):"Save Changes"})]})]})})}function V(e){let{open:t,onOpenChange:s,user:r}=e,{users:n,setUsers:i,isProcessing:l,setIsProcessing:o,setNotification:c}=T(),d=async()=>{o(!0);try{await N(r.id),i(n.filter(e=>e.id!==r.id)),c({type:"success",message:"User ".concat(r.username," deleted successfully")}),s(!1),setTimeout(()=>c(null),3e3)}catch(e){console.error("Error deleting user:",e),c({type:"error",message:e.message||"Failed to delete user"}),setTimeout(()=>c(null),3e3)}finally{o(!1)}};return(0,a.jsx)(z.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(z.Cf,{className:"bg-card border border-border text-card-foreground",children:[(0,a.jsx)(z.c7,{children:(0,a.jsx)(z.L3,{children:"Delete User"})}),(0,a.jsxs)("div",{className:"py-4",children:[(0,a.jsxs)("p",{children:["Are you sure you want to delete user ",(0,a.jsx)("strong",{children:r.username}),"?"]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"This action cannot be undone."})]}),(0,a.jsxs)(z.Es,{children:[(0,a.jsx)(O.$,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,a.jsx)(O.$,{className:"bg-destructive hover:bg-destructive/80 text-white",onClick:d,disabled:l,children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.A,{className:"h-3 w-3 mr-1 animate-spin text-white"}),"Deleting..."]}):"Delete User"})]})]})})}function G(e){let{open:t,onOpenChange:s}=e,{users:r,setUsers:n,isProcessing:l,setIsProcessing:o,setNotification:c,roles:d,addRoleIfNotExists:m}=T(),[u,h]=(0,i.useState)({username:"",email:"",password:"",role:"user",is_active:!0}),x=async()=>{if(!u.username||!u.email||!u.password){c({type:"error",message:"Please fill in all required fields"});return}m(u.role),o(!0);try{let e=await v(u);e.created_at||(e.created_at=new Date().toISOString()),n([...r,e]),c({type:"success",message:"User ".concat(e.username," created successfully")}),s(!1),h({username:"",email:"",password:"",role:"user",is_active:!0}),setTimeout(()=>c(null),3e3)}catch(e){console.error("Error adding user:",e),c({type:"error",message:e.message||"Failed to create user"}),setTimeout(()=>c(null),3e3)}finally{o(!1)}};return(0,a.jsx)(z.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(z.Cf,{className:"bg-card border border-border text-card-foreground",children:[(0,a.jsx)(z.c7,{children:(0,a.jsx)(z.L3,{children:"Add New User"})}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(M.J,{htmlFor:"username",children:["Username ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsx)(J.p,{id:"username",value:u.username,onChange:e=>h({...u,username:e.target.value}),className:"bg-background border-input text-foreground",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(M.J,{htmlFor:"email",children:["Email ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsx)(J.p,{id:"email",type:"email",value:u.email,onChange:e=>h({...u,email:e.target.value}),className:"bg-background border-input text-foreground",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(M.J,{htmlFor:"password",children:["Password ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsx)(J.p,{id:"password",type:"password",value:u.password,onChange:e=>h({...u,password:e.target.value}),className:"bg-background border-input text-foreground",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(M.J,{htmlFor:"role",children:"Role"}),(0,a.jsxs)($.l6,{value:u.role,onValueChange:e=>h({...u,role:e}),children:[(0,a.jsx)($.bq,{className:"bg-background border-input text-foreground",children:(0,a.jsx)($.yv,{placeholder:"Select a role"})}),(0,a.jsx)($.gC,{className:"bg-popover border border-border text-popover-foreground",children:d.map(e=>(0,a.jsx)($.eb,{value:e.name,children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(q.d,{id:"is_active",checked:u.is_active,onCheckedChange:e=>h({...u,is_active:e})}),(0,a.jsx)(M.J,{htmlFor:"is_active",children:"Active"})]})]}),(0,a.jsxs)(z.Es,{children:[(0,a.jsx)(O.$,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,a.jsx)(O.$,{className:"bg-violet-600 hover:bg-violet-700 text-white btn-glow",onClick:x,disabled:l,children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.A,{className:"h-3 w-3 mr-1 animate-spin text-white"}),"Creating..."]}):"Add User"})]})]})})}function H(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!e)return"N/A";try{let s="string"==typeof e?new Date(e):e;if(isNaN(s.getTime()))return"Invalid date";let a={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return t&&(a.second="2-digit"),s.toLocaleString("en-US",a)}catch(e){return console.error("Error formatting date:",e),"Error formatting date"}}function X(e){if(!e)return"N/A";try{let t="string"==typeof e?new Date(e):e;if(isNaN(t.getTime()))return"Invalid date";let s=new Date,a=Math.floor((s.getTime()-t.getTime())/1e3);if(a<60)return"".concat(a," second").concat(1!==a?"s":""," ago");let r=Math.floor(a/60);if(r<60)return"".concat(r," minute").concat(1!==r?"s":""," ago");let n=Math.floor(r/60);if(n<24)return"".concat(n," hour").concat(1!==n?"s":""," ago");let i=Math.floor(n/24);if(i<30)return"".concat(i," day").concat(1!==i?"s":""," ago");let l=Math.floor(i/30);if(l<12)return"".concat(l," month").concat(1!==l?"s":""," ago");let o=Math.floor(l/12);return"".concat(o," year").concat(1!==o?"s":""," ago")}catch(e){return console.error("Error calculating relative time:",e),"Error calculating time"}}function Y(){let{users:e}=T(),[t,s]=(0,i.useState)(!1),[r,n]=(0,i.useState)(!1),[l,o]=(0,i.useState)(!1),[c,d]=(0,i.useState)(null),m=e=>{d(e),s(!0)},u=e=>{d(e),n(!0)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"User Management"}),(0,a.jsxs)(O.$,{className:"bg-violet-600 hover:bg-violet-700 text-white btn-glow",onClick:()=>o(!0),children:[(0,a.jsx)(L,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),(0,a.jsx)("div",{className:"bg-card p-4 rounded-lg border border-border overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-border",children:[(0,a.jsx)("th",{className:"p-3 text-muted-foreground",children:"ID"}),(0,a.jsx)("th",{className:"p-3 text-muted-foreground",children:"Username"}),(0,a.jsx)("th",{className:"p-3 text-muted-foreground",children:"Email"}),(0,a.jsx)("th",{className:"p-3 text-muted-foreground",children:"Role"}),(0,a.jsx)("th",{className:"p-3 text-muted-foreground",children:"Status"}),(0,a.jsx)("th",{className:"p-3 text-muted-foreground",children:"Created"}),(0,a.jsx)("th",{className:"p-3 text-muted-foreground",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:null==e?void 0:e.map(e=>(0,a.jsxs)("tr",{className:"border-b border-border hover:bg-accent/50",children:[(0,a.jsx)("td",{className:"p-3 text-card-foreground",children:e.id}),(0,a.jsx)("td",{className:"p-3 text-card-foreground",children:e.username}),(0,a.jsx)("td",{className:"p-3 text-card-foreground",children:e.email}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("admin"===e.role?"bg-purple-500 text-white":"researcher"===e.role?"bg-blue-500 text-white":"bg-gray-500 text-white"),children:e.role})}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(e.is_active?"bg-green-500 text-white":"bg-red-500 text-white"),children:e.is_active?"Active":"Inactive"})}),(0,a.jsx)("td",{className:"p-3 text-muted-foreground",children:e.created_at?H(e.created_at,!1):"N/A"}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(O.$,{variant:"outline",size:"sm",className:"border-violet-600 text-violet-600 hover:bg-violet-600/20 text-xs h-7",onClick:()=>m(e),children:"Edit"}),"admin"!==e.username&&(0,a.jsx)(O.$,{variant:"outline",size:"sm",className:"text-xs h-7 border-destructive text-destructive hover:bg-destructive/20",onClick:()=>u(e),children:"Delete"})]})})]},e.id))})]})}),t&&(0,a.jsx)(B,{open:t,onOpenChange:s,user:c}),r&&(0,a.jsx)(V,{open:r,onOpenChange:n,user:c}),(0,a.jsx)(G,{open:l,onOpenChange:o})]})}let Z=(0,m.A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var K=s(9993),W=s(1466);let Q=(0,m.A)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);function ee(){let{activity:e,setActivity:t,users:s,isProcessing:r,setIsProcessing:n,setNotification:l}=T(),[o,c]=(0,i.useState)(!1),[d,m]=(0,i.useState)(new Date),[u,h]=(0,i.useState)(10),[x,p]=(0,i.useState)(""),[g,f]=(0,i.useState)(""),[b,v]=(0,i.useState)(""),[y,N]=(0,i.useState)(!1),[w,k]=(0,i.useState)([]),[C,S]=(0,i.useState)([]),[E,_]=(0,i.useState)([]);(0,i.useEffect)(()=>{if(!o)return;let e=setInterval(()=>{F(!1),m(new Date)},1e3*u);return()=>clearInterval(e)},[o,u]),(0,i.useEffect)(()=>{e&&e.length>0&&(k([...new Set(e.map(e=>e.username))].filter(Boolean).sort()),S([...new Set(e.map(e=>e.action))].filter(Boolean).sort()),_([...new Set(e.map(e=>e.page_url).filter(Boolean))].sort()))},[e]),(0,i.useEffect)(()=>{if(e&&e.length>0){let s=e.map(e=>{if((!e.username||"system"===e.username)&&"Login"===e.action&&e.details){let t=e.details.match(/User (\w+) logged in/);if(t&&t[1])return console.log("Fixing username for login activity: ".concat(t[1])),{...e,username:t[1]}}return e});JSON.stringify(s)!==JSON.stringify(e)&&(console.log("Updating activity data with processed usernames"),t(s))}},[e,t]);let F=async function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];e&&n(!0);try{let s=(await j()).activity.map(e=>({...e,formattedTime:H(e.timestamp),relativeTime:X(e.timestamp)}));t(s),e&&(l({type:"success",message:"Activity logs refreshed successfully"}),setTimeout(()=>l(null),3e3))}catch(t){console.error("Error refreshing activity logs:",t),e&&l({type:"error",message:"Failed to refresh activity logs"})}finally{e&&n(!1)}},D=async()=>{if(confirm("Are you sure you want to clear old activity logs? This cannot be undone.")){n(!0);try{await A(30),l({type:"success",message:"Activity logs older than 30 days have been cleared"});let e=await j();t(e.activity)}catch(e){console.error("Error clearing logs:",e),l({type:"error",message:"Failed to clear activity logs"})}finally{n(!1)}}},R=e.filter(e=>{let t=!x||"all"===x||e.username===x,s=!g||"all"===g||e.action===g,a=!b||"all"===b||e.page_url&&e.page_url.includes(b);return t&&s&&a}),P=(()=>{let t={};return console.log("Activity data for summary:",e),e.forEach(e=>{if(!e.username){console.log("Skipping item with no username:",e);return}let s=e.username;console.log("Processing activity for user: ".concat(s,", action: ").concat(e.action)),t[s]||(t[s]={totalActions:0,pageVisits:0,loginCount:0,lastActive:null}),t[s].totalActions++,"Page visit"===e.action?t[s].pageVisits++:"Login"===e.action&&t[s].loginCount++;let a=new Date(e.timestamp);(!t[s].lastActive||a>new Date(t[s].lastActive))&&(t[s].lastActive=e.timestamp)}),console.log("Generated activity summary:",t),t})(),I=e=>{if(!e)return"N/A";try{let t=new Date(e);if(isNaN(t.getTime()))return"Invalid Date";return t.toLocaleString()}catch(e){return"Invalid Date"}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Activity Log"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("div",{className:"flex items-center mr-4",children:[(0,a.jsx)("input",{type:"checkbox",id:"auto-refresh",checked:o,onChange:e=>c(e.target.checked),className:"mr-2"}),(0,a.jsx)("label",{htmlFor:"auto-refresh",className:"text-sm text-muted-foreground",children:"Auto-refresh"})]}),o&&(0,a.jsxs)("div",{className:"flex items-center mr-4",children:[(0,a.jsx)("label",{htmlFor:"refresh-interval",className:"text-sm text-muted-foreground mr-2",children:"Every"}),(0,a.jsxs)("select",{id:"refresh-interval",value:u,onChange:e=>h(Number(e.target.value)),className:"bg-background border border-input rounded px-2 py-1 text-sm",children:[(0,a.jsx)("option",{value:"5",children:"5 sec"}),(0,a.jsx)("option",{value:"10",children:"10 sec"}),(0,a.jsx)("option",{value:"30",children:"30 sec"}),(0,a.jsx)("option",{value:"60",children:"1 min"})]})]}),(0,a.jsxs)(O.$,{variant:"outline",className:"border-violet-600 text-violet-600 hover:bg-violet-600/20",onClick:()=>N(!y),children:[(0,a.jsx)(Z,{className:"h-4 w-4 mr-2"}),y?"Hide Filters":"Show Filters"]}),(0,a.jsxs)(O.$,{variant:"outline",className:"border-violet-600 text-violet-600 hover:bg-violet-600/20",onClick:()=>F(),disabled:r,children:[(0,a.jsx)(U.A,{className:"h-4 w-4 mr-2 ".concat(r?"animate-spin":"")}),"Refresh"]}),(0,a.jsxs)(O.$,{variant:"outline",className:"border-destructive text-destructive hover:bg-destructive/20",onClick:D,disabled:r,children:[(0,a.jsx)(K.A,{className:"h-4 w-4 mr-2"}),"Clear Old Logs"]})]})]}),o&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground text-right",children:["Last refreshed: ",I(d)," (auto-refreshes every ",u," seconds)"]}),(0,a.jsxs)("div",{className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"User Activity Summary"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(P).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"bg-background/50 backdrop-blur-sm p-4 rounded-lg border border-border hover:shadow-md transition-shadow duration-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(W.A,{className:"h-4 w-4 text-primary"}),(0,a.jsx)("span",{className:"font-medium text-foreground",children:t})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Total Actions:"}),(0,a.jsx)("span",{className:"text-foreground",children:s.totalActions})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Page Visits:"}),(0,a.jsx)("span",{className:"text-foreground",children:s.pageVisits})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Last Active:"}),(0,a.jsx)("span",{className:"text-foreground",children:I(s.lastActive)})]})]})]},t)})})]}),y&&(0,a.jsx)("div",{className:"bg-card p-4 rounded-lg border border-border mb-4",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-end",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-1 block",children:"Filter by User"}),(0,a.jsxs)($.l6,{value:x,onValueChange:p,children:[(0,a.jsx)($.bq,{children:(0,a.jsx)($.yv,{placeholder:"All Users"})}),(0,a.jsxs)($.gC,{children:[(0,a.jsx)($.eb,{value:"all",children:"All Users"}),w.map(e=>(0,a.jsx)($.eb,{value:e,children:e},e))]})]})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-1 block",children:"Filter by Action"}),(0,a.jsxs)($.l6,{value:g,onValueChange:f,children:[(0,a.jsx)($.bq,{children:(0,a.jsx)($.yv,{placeholder:"All Actions"})}),(0,a.jsxs)($.gC,{children:[(0,a.jsx)($.eb,{value:"all",children:"All Actions"}),C.map(e=>(0,a.jsx)($.eb,{value:e,children:e},e))]})]})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-1 block",children:"Filter by Page"}),(0,a.jsxs)($.l6,{value:b,onValueChange:v,children:[(0,a.jsx)($.bq,{children:(0,a.jsx)($.yv,{placeholder:"All Pages"})}),(0,a.jsxs)($.gC,{children:[(0,a.jsx)($.eb,{value:"all",children:"All Pages"}),E.map(e=>(0,a.jsx)($.eb,{value:e,children:e},e))]})]})]}),(0,a.jsx)(O.$,{variant:"outline",onClick:()=>{p(""),f(""),v("")},className:"mb-0",children:"Reset Filters"})]})}),(0,a.jsx)("div",{className:"bg-card p-4 rounded-lg border border-border",children:0===R.length?(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No activity logs found"}):(0,a.jsx)("div",{className:"space-y-4",children:R.map((e,t)=>(0,a.jsxs)("div",{className:"p-3 border-b border-border last:border-0",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"text-card-foreground font-medium ".concat("Login"===e.action?"text-violet-500":""),children:e.action||"Unknown Action"}),(0,a.jsxs)("div",{className:"text-muted-foreground text-sm flex items-center gap-2",children:[(0,a.jsx)("span",{children:I(e.timestamp)}),(0,a.jsxs)("span",{className:"text-xs opacity-70",children:["(",X(e.timestamp),")"]})]})]}),(0,a.jsxs)("div",{className:"text-muted-foreground mt-1 flex items-center",children:[(0,a.jsx)(W.A,{className:"h-4 w-4 mr-1 ".concat("Login"===e.action?"text-violet-500":"")}),(0,a.jsx)("span",{className:"font-medium",children:e.username||"Anonymous"})]}),e.details&&(0,a.jsx)("div",{className:"text-muted-foreground text-sm mt-1",children:e.details}),e.page_url&&(0,a.jsxs)("div",{className:"text-violet-500 text-sm mt-1 flex items-center",children:[(0,a.jsx)(Q,{className:"h-3 w-3 mr-1"}),e.page_url]}),e.ip_address&&(0,a.jsxs)("div",{className:"text-muted-foreground text-xs mt-1",children:["IP: ",e.ip_address]})]},e.id||t))})}),R.length>0&&(0,a.jsxs)("div",{className:"text-center text-muted-foreground text-sm",children:["Showing ",R.length," of ",e.length," activities"]})]})}var et=s(8068),es=s(8166),ea=s(3610),er=s(1488),en=s(858),ei=s(7510),el=s(7028),eo=s(3360),ec="Checkbox",[ed,em]=(0,es.A)(ec),[eu,eh]=ed(ec),ex=i.forwardRef((e,t)=>{let{__scopeCheckbox:s,name:r,checked:n,defaultChecked:l,required:o,disabled:c,value:d="on",onCheckedChange:m,form:u,...h}=e,[x,p]=i.useState(null),g=(0,et.s)(t,e=>p(e)),f=i.useRef(!1),b=!x||u||!!x.closest("form"),[j=!1,v]=(0,er.i)({prop:n,defaultProp:l,onChange:m}),y=i.useRef(j);return i.useEffect(()=>{let e=null==x?void 0:x.form;if(e){let t=()=>v(y.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[x,v]),(0,a.jsxs)(eu,{scope:s,state:j,disabled:c,children:[(0,a.jsx)(eo.sG.button,{type:"button",role:"checkbox","aria-checked":eb(j)?"mixed":j,"aria-required":o,"data-state":ej(j),"data-disabled":c?"":void 0,disabled:c,value:d,...h,ref:g,onKeyDown:(0,ea.m)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,ea.m)(e.onClick,e=>{v(e=>!!eb(e)||!e),b&&(f.current=e.isPropagationStopped(),f.current||e.stopPropagation())})}),b&&(0,a.jsx)(ef,{control:x,bubbles:!f.current,name:r,value:d,checked:j,required:o,disabled:c,form:u,style:{transform:"translateX(-100%)"},defaultChecked:!eb(l)&&l})]})});ex.displayName=ec;var ep="CheckboxIndicator",eg=i.forwardRef((e,t)=>{let{__scopeCheckbox:s,forceMount:r,...n}=e,i=eh(ep,s);return(0,a.jsx)(el.C,{present:r||eb(i.state)||!0===i.state,children:(0,a.jsx)(eo.sG.span,{"data-state":ej(i.state),"data-disabled":i.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...e.style}})})});eg.displayName=ep;var ef=e=>{let{control:t,checked:s,bubbles:r=!0,defaultChecked:n,...l}=e,o=i.useRef(null),c=(0,en.Z)(s),d=(0,ei.X)(t);i.useEffect(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==s&&t){let a=new Event("click",{bubbles:r});e.indeterminate=eb(s),t.call(e,!eb(s)&&s),e.dispatchEvent(a)}},[c,s,r]);let m=i.useRef(!eb(s)&&s);return(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:null!=n?n:m.current,...l,tabIndex:-1,ref:o,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function eb(e){return"indeterminate"===e}function ej(e){return eb(e)?"indeterminate":e?"checked":"unchecked"}var ev=s(8867),ey=s(9602);let eN=i.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(ex,{ref:t,className:(0,ey.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...r,children:(0,a.jsx)(eg,{className:(0,ey.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(ev.A,{className:"h-4 w-4"})})})});function ew(e){let{open:t,onOpenChange:s,role:r}=e,{roles:n,setRoles:l,availablePermissions:o,isProcessing:c,setIsProcessing:d,setNotification:m}=T(),[u,h]=(0,i.useState)({id:r.id,name:r.name,description:r.description,permissions:[...r.permissions]}),x=e=>{h(t=>{let s=t.permissions.includes(e)?t.permissions.filter(t=>t!==e):[...t.permissions,e];return{...t,permissions:s}})},p=async()=>{if(!u.name){m({type:"error",message:"Role name is required"});return}d(!0);try{let e=n.map(e=>e.id===u.id?u:e);l(e),m({type:"success",message:'Role "'.concat(u.name,'" updated successfully')}),s(!1),setTimeout(()=>m(null),3e3)}catch(e){console.error("Error updating role:",e),m({type:"error",message:"Failed to update role"}),setTimeout(()=>m(null),3e3)}finally{d(!1)}};return(0,a.jsx)(z.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(z.Cf,{className:"bg-card border border-border text-card-foreground",children:[(0,a.jsx)(z.c7,{children:(0,a.jsx)(z.L3,{children:"Edit Role"})}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(M.J,{htmlFor:"name",children:["Role Name ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsx)(J.p,{id:"name",value:u.name,onChange:e=>h({...u,name:e.target.value}),className:"bg-background border-input text-foreground",disabled:"admin"===u.name||"researcher"===u.name||"user"===u.name,required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(M.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)(J.p,{id:"description",value:u.description,onChange:e=>h({...u,description:e.target.value}),className:"bg-background border-input text-foreground",placeholder:"Role description"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(M.J,{children:"Permissions"}),(0,a.jsx)("div",{className:"space-y-2 border border-border rounded-md p-4 max-h-48 overflow-y-auto",children:o.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eN,{id:"permission-".concat(e.id),checked:u.permissions.includes(e.id),onCheckedChange:()=>x(e.id),disabled:"admin"===u.name&&"user_management"===e.id}),(0,a.jsx)(M.J,{htmlFor:"permission-".concat(e.id),className:"font-normal cursor-pointer",children:e.name})]},e.id))})]})]}),(0,a.jsxs)(z.Es,{children:[(0,a.jsx)(O.$,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,a.jsx)(O.$,{className:"bg-violet-600 hover:bg-violet-700 text-white btn-glow",onClick:p,disabled:c,children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.A,{className:"h-3 w-3 mr-1 animate-spin text-white"}),"Saving..."]}):"Save Changes"})]})]})})}function ek(e){let{open:t,onOpenChange:s}=e,{roles:r,setRoles:n,availablePermissions:l,isProcessing:o,setIsProcessing:c,setNotification:d}=T(),[m,u]=(0,i.useState)({name:"",description:"",permissions:[]}),h=e=>{u(t=>{let s=t.permissions.includes(e)?t.permissions.filter(t=>t!==e):[...t.permissions,e];return{...t,permissions:s}})},x=async()=>{if(!m.name){d({type:"error",message:"Role name is required"});return}if(r.some(e=>e.name.toLowerCase()===m.name.toLowerCase())){d({type:"error",message:'Role "'.concat(m.name,'" already exists')});return}c(!0);try{let e={id:r.length+1,...m};n([...r,e]),d({type:"success",message:'Role "'.concat(m.name,'" created successfully')}),s(!1),u({name:"",description:"",permissions:[]}),setTimeout(()=>d(null),3e3)}catch(e){console.error("Error adding role:",e),d({type:"error",message:e.message||"Failed to create role"}),setTimeout(()=>d(null),3e3)}finally{c(!1)}};return(0,a.jsx)(z.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(z.Cf,{className:"bg-card border border-border text-card-foreground",children:[(0,a.jsx)(z.c7,{children:(0,a.jsx)(z.L3,{children:"Add New Role"})}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(M.J,{htmlFor:"name",children:["Role Name ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsx)(J.p,{id:"name",value:m.name,onChange:e=>u({...m,name:e.target.value}),className:"bg-background border-input text-foreground",placeholder:"e.g., editor",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(M.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)(J.p,{id:"description",value:m.description,onChange:e=>u({...m,description:e.target.value}),className:"bg-background border-input text-foreground",placeholder:"Role description"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(M.J,{children:"Permissions"}),(0,a.jsx)("div",{className:"space-y-2 border border-border rounded-md p-4 max-h-48 overflow-y-auto",children:l.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eN,{id:"permission-".concat(e.id),checked:m.permissions.includes(e.id),onCheckedChange:()=>h(e.id)}),(0,a.jsx)(M.J,{htmlFor:"permission-".concat(e.id),className:"font-normal cursor-pointer",children:e.name})]},e.id))})]})]}),(0,a.jsxs)(z.Es,{children:[(0,a.jsx)(O.$,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,a.jsx)(O.$,{className:"bg-violet-600 hover:bg-violet-700 text-white btn-glow",onClick:x,disabled:o,children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.A,{className:"h-3 w-3 mr-1 animate-spin text-white"}),"Creating..."]}):"Add Role"})]})]})})}function eC(){let{roles:e,availablePermissions:t}=T(),[s,r]=(0,i.useState)(!1),[n,l]=(0,i.useState)(!1),[o,c]=(0,i.useState)(null),d=e=>{c(e),r(!0)};return(0,i.useEffect)(()=>{},[e]),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Role Management"}),(0,a.jsxs)(O.$,{className:"bg-violet-600 hover:bg-violet-700 text-white btn-glow",onClick:()=>l(!0),children:[(0,a.jsx)(L,{className:"h-4 w-4 mr-2"}),"Add Role"]})]}),(0,a.jsx)("p",{className:"text-muted-foreground mb-6",children:"Configure role-based permissions and access controls for your application."}),(0,a.jsx)("div",{className:"bg-card p-6 rounded-lg border border-border",children:(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,a.jsx)("div",{className:"p-4 border border-border rounded-lg",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-card-foreground font-medium mb-2",children:e.name}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm mb-2",children:e.description}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:e.permissions.map(e=>{var s;return(0,a.jsx)("span",{className:"px-2 py-1 bg-accent rounded-md text-xs text-foreground",children:(null===(s=t.find(t=>t.id===e))||void 0===s?void 0:s.name)||e},e)})})]}),(0,a.jsx)(O.$,{variant:"outline",size:"sm",className:"border-violet-600 text-violet-600 hover:bg-violet-600/20 text-xs h-7",onClick:()=>d(e),children:"Edit Role"})]})},e.id))})}),s&&(0,a.jsx)(ew,{open:s,onOpenChange:r,role:o}),(0,a.jsx)(ek,{open:n,onOpenChange:l})]})}function eA(){let{systemSettings:e,setSystemSettings:t,isProcessing:s,setIsProcessing:r,setNotification:n}=T(),i=async(e,s)=>{r(!0);try{let a=await w(e,s);t(a),n({type:"success",message:"".concat(e.replace(/_/g," ")," has been ").concat(s?"enabled":"disabled")}),setTimeout(()=>n(null),3e3)}catch(e){console.error("Error updating setting:",e),n({type:"error",message:"Failed to update setting"}),setTimeout(()=>n(null),3e3)}finally{r(!1)}},l=async()=>{r(!0);try{await k(),n({type:"success",message:"Backup process started"}),setTimeout(()=>{n(null)},3e3)}catch(e){console.error("Error starting backup:",e),n({type:"error",message:"Failed to start backup"}),setTimeout(()=>n(null),3e3)}finally{r(!1)}},o=async()=>{r(!0);try{await C(),n({type:"success",message:"Data export initiated"}),setTimeout(()=>n(null),3e3)}catch(e){console.error("Error exporting data:",e),n({type:"error",message:"Failed to export data"}),setTimeout(()=>n(null),3e3)}finally{r(!1)}},c=async()=>{r(!0);try{await S(),n({type:"success",message:"Data cleanup process started"}),setTimeout(()=>n(null),3e3)}catch(e){console.error("Error cleaning up data:",e),n({type:"error",message:"Failed to clean up data"}),setTimeout(()=>n(null),3e3)}finally{r(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Settings"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-card p-6 rounded-lg border border-border",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-card-foreground mb-4",children:"System Settings"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 border-b border-border",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-card-foreground font-medium",children:"Maintenance Mode"}),(0,a.jsx)("p",{className:"text-muted-foreground text-xs",children:"Temporarily disable access to the application"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(q.d,{id:"maintenance-mode",checked:(null==e?void 0:e.maintenance_mode)||!1,onCheckedChange:e=>i("maintenance_mode",e),disabled:s}),(0,a.jsx)(M.J,{htmlFor:"maintenance-mode",className:"sr-only",children:"Maintenance Mode"})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 border-b border-border",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-card-foreground font-medium",children:"Debug Mode"}),(0,a.jsx)("p",{className:"text-muted-foreground text-xs",children:"Enable detailed error messages and logging"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(q.d,{id:"debug-mode",checked:(null==e?void 0:e.debug_mode)||!1,onCheckedChange:e=>i("debug_mode",e),disabled:s}),(0,a.jsx)(M.J,{htmlFor:"debug-mode",className:"sr-only",children:"Debug Mode"})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 border-b border-border",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-card-foreground font-medium",children:"API Rate Limiting"}),(0,a.jsx)("p",{className:"text-muted-foreground text-xs",children:"Limit API requests per user"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(q.d,{id:"api-rate-limiting",checked:(null==e?void 0:e.api_rate_limiting)||!1,onCheckedChange:e=>i("api_rate_limiting",e),disabled:s}),(0,a.jsx)(M.J,{htmlFor:"api-rate-limiting",className:"sr-only",children:"API Rate Limiting"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-card p-6 rounded-lg border border-border",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-card-foreground mb-4",children:"Data Management"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-3 border-b border-border",children:[(0,a.jsx)("h4",{className:"text-card-foreground font-medium mb-2",children:"Database Backup"}),(0,a.jsxs)("p",{className:"text-muted-foreground text-xs mb-3",children:["Last backup:"," ",(null==e?void 0:e.last_backup)?new Date(e.last_backup).toLocaleString():"Never"]}),(0,a.jsx)(O.$,{className:"bg-violet-600 hover:bg-violet-700 text-white btn-glow text-xs py-1 h-8",onClick:l,disabled:s,children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.A,{className:"h-3 w-3 mr-1 animate-spin text-white"}),"Running..."]}):"Run Backup Now"})]}),(0,a.jsxs)("div",{className:"p-3 border-b border-border",children:[(0,a.jsx)("h4",{className:"text-card-foreground font-medium mb-2",children:"Data Export"}),(0,a.jsx)("p",{className:"text-muted-foreground text-xs mb-3",children:"Export system data for backup or migration"}),(0,a.jsx)(O.$,{className:"bg-violet-600 hover:bg-violet-700 text-white btn-glow text-xs py-1 h-8",onClick:o,disabled:s,children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.A,{className:"h-3 w-3 mr-1 animate-spin text-white"}),"Exporting..."]}):"Export Data"})]}),(0,a.jsxs)("div",{className:"p-3 border-b border-border",children:[(0,a.jsx)("h4",{className:"text-card-foreground font-medium mb-2",children:"Data Cleanup"}),(0,a.jsx)("p",{className:"text-muted-foreground text-xs mb-3",children:"Remove old or unused data from the system"}),(0,a.jsx)(O.$,{className:"bg-violet-600 hover:bg-violet-700 text-white btn-glow text-xs py-1 h-8",onClick:c,disabled:s,children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.A,{className:"h-3 w-3 mr-1 animate-spin text-white"}),"Cleaning..."]}):"Cleanup Data"})]})]})]})]})]})}function eS(e){let{activeTab:t,loading:s,error:r}=e;return s?(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)(E.A,{})}):(0,a.jsxs)(a.Fragment,{children:[r&&(0,a.jsx)("div",{className:"bg-yellow-500/20 border border-yellow-500 text-yellow-700 dark:text-yellow-200 px-4 py-2 rounded-md mb-4",children:(0,a.jsx)("p",{children:r})}),"dashboard"===t&&(0,a.jsx)(I,{}),"users"===t&&(0,a.jsx)(Y,{}),"activity"===t&&(0,a.jsx)(ee,{}),"permissions"===t&&(0,a.jsx)(eC,{}),"settings"===t&&(0,a.jsx)(eA,{})]})}eN.displayName=ex.displayName;var eE=s(3239),e_=s(1594);function eF(e){let{notification:t}=e;return(0,a.jsxs)(c.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-4 p-3 rounded-md flex items-center backdrop-blur-sm border ".concat("success"===t.type?"bg-primary/10 border-primary text-primary":"bg-destructive/10 border-destructive text-destructive"),children:["success"===t.type?(0,a.jsx)(eE.A,{className:"h-5 w-5 mr-2"}):(0,a.jsx)(e_.A,{className:"h-5 w-5 mr-2"}),(0,a.jsx)("p",{children:t.message})]})}function eD(){let{user:e}=(0,f.A)();!function(){let{logout:e}=(0,f.A)();(0,b.useRouter)()}();let[t,s]=(0,i.useState)("dashboard"),{loading:n,setLoading:l,error:m,setError:v,notification:y,setNotification:N,stats:w,setStats:k,users:C,setUsers:A,activity:S,setActivity:_,systemSettings:F,setSystemSettings:D,addRoleIfNotExists:R}=T();(0,i.useEffect)(()=>{(async()=>{l(!0);try{let e=await j();e&&(k(e.stats||{}),A(e.users||[]),_(e.activity||[]),D(e.systemSettings||{}),e.users&&e.users.length>0&&e.users.forEach(e=>{e.role&&R(e.role)})),v(null)}catch(e){console.error("Error fetching admin data:",e),v("Failed to load admin data. Using mock data instead.")}finally{l(!1)}})()},[]);let P=[{id:"dashboard",label:"Dashboard",icon:d.A},{id:"users",label:"Users",icon:u},{id:"activity",label:"Activity Log",icon:h.A},{id:"permissions",label:"Permissions",icon:x},{id:"settings",label:"Settings",icon:p.A}],I={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return(0,a.jsxs)("div",{className:"min-h-screen bg-background antialiased relative overflow-hidden",children:[(0,a.jsx)("div",{className:"h-full w-full absolute inset-0 z-0",children:(0,a.jsx)(r.n,{id:"tsparticlesfullpage",background:"transparent",minSize:.6,maxSize:1.4,particleDensity:100,className:"w-full h-full",particleColor:"var(--foreground)"})}),(0,a.jsxs)("div",{className:"relative z-10 pt-20 px-6 md:px-8",children:[(0,a.jsx)("div",{className:"max-w-7xl mx-auto relative",children:(0,a.jsxs)(o(),{href:"/",className:"absolute -top-12 left-0 z-20 flex items-center justify-center rounded-md bg-card/80 backdrop-blur-sm border border-border hover:bg-accent transition-colors duration-200 px-3 py-2 text-sm","aria-label":"Back to home",children:[(0,a.jsx)(g.A,{className:"w-4 h-4 text-foreground mr-2"}),(0,a.jsx)("span",{className:"text-foreground",children:"Back to Home"})]})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)(c.P.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary",children:"Admin Dashboard"}),(0,a.jsx)(c.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"flex items-center",children:(0,a.jsx)("div",{className:"px-4 py-2 bg-card/80 backdrop-blur-sm rounded-lg border border-border",children:(0,a.jsxs)("span",{className:"text-foreground font-medium",children:["Welcome, ",(0,a.jsx)("span",{className:"text-primary font-bold",children:null==e?void 0:e.username})]})})})]}),y&&(0,a.jsx)(eF,{notification:y}),(0,a.jsxs)(c.P.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border overflow-hidden shadow-md",children:[(0,a.jsx)("div",{className:"flex border-b border-border overflow-x-auto",children:P.map((e,r)=>(0,a.jsxs)(c.P.button,{variants:I,className:"flex items-center space-x-2 px-6 py-4 text-sm font-medium transition-colors whitespace-nowrap ".concat(t===e.id?"text-primary-foreground bg-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground hover:bg-accent"),onClick:()=>s(e.id),children:[(0,a.jsx)(e.icon,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:e.label})]},e.id))}),(0,a.jsxs)("div",{className:"p-6",children:[n&&(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)(E.A,{})}),!n&&(0,a.jsx)(eS,{activeTab:t,loading:n,error:m})]})]})]})]})]})}var eR=s(3726);function eT(){return(0,a.jsx)(eR.A,{requiredRole:"admin",children:(0,a.jsxs)("main",{className:"min-h-screen bg-background antialiased relative overflow-hidden",children:[(0,a.jsx)("div",{className:"h-full w-full absolute inset-0 z-0",children:(0,a.jsx)(r.n,{id:"tsparticlesfullpage",background:"transparent",minSize:.6,maxSize:1.4,particleDensity:100,className:"w-full h-full",particleColor:"var(--foreground)"})}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)(n.A,{}),(0,a.jsx)(eD,{})]})]})})}},5472:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(5155),r=s(602);function n(){return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)(r.P.div,{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full shadow-[0_0_15px_rgba(26,35,126,0.3)]",animate:{rotate:360},transition:{duration:1,repeat:Number.POSITIVE_INFINITY,ease:"linear"}}),(0,a.jsx)("p",{className:"mt-4 text-foreground",children:"Loading data..."})]})}},3726:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a=s(5155),r=s(1069),n=s(6046),i=s(2115),l=s(5472);function o(e){let{children:t,requiredRole:s}=e,{user:o,isLoading:c}=(0,r.A)(),d=(0,n.useRouter)(),m=(0,n.usePathname)();return((0,i.useEffect)(()=>{let e="true"===sessionStorage.getItem("isLoggingOut");c||o?!c&&o&&s&&"admin"!==o.role&&(("admin"!==s||"admin"===o.role)&&("researcher"!==s||["admin","researcher"].includes(o.role))||d.push("/")):e?(sessionStorage.removeItem("isLoggingOut"),d.push("/")):d.push("/login?redirect=".concat(encodeURIComponent(m)))},[o,c,d,m,s]),c)?(0,a.jsx)("div",{className:"min-h-screen bg-black/[0.96] flex items-center justify-center",children:(0,a.jsx)(l.A,{})}):s&&o&&"admin"!==o.role&&("admin"===s&&"admin"!==o.role||"researcher"===s&&!["admin","researcher"].includes(o.role))||!o?null:(0,a.jsx)(a.Fragment,{children:t})}},7837:(e,t,s)=>{"use strict";s.d(t,{Cf:()=>m,Es:()=>h,L3:()=>x,c7:()=>u,lG:()=>o});var a=s(5155),r=s(2115),n=s(6217),i=s(767),l=s(9602);let o=n.bL;n.l9;let c=n.ZL;n.bm;let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.hJ,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});d.displayName=n.hJ.displayName;let m=r.forwardRef((e,t)=>{let{className:s,children:r,...o}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(d,{}),(0,a.jsxs)(n.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...o,children:[r,(0,a.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.UC.displayName;let u=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};u.displayName="DialogHeader";let h=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};h.displayName="DialogFooter";let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});x.displayName=n.hE.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})}).displayName=n.VY.displayName},2336:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var a=s(5155),r=s(2115),n=s(9602);let i=r.forwardRef((e,t)=>{let{className:s,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...i})});i.displayName="Input"},5785:(e,t,s)=>{"use strict";s.d(t,{J:()=>c});var a=s(5155),r=s(2115),n=s(6195),i=s(6421),l=s(9602);let o=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.b,{ref:t,className:(0,l.cn)(o(),s),...r})});c.displayName=n.b.displayName},745:(e,t,s)=>{"use strict";s.d(t,{bq:()=>u,eb:()=>g,gC:()=>p,l6:()=>d,yv:()=>m});var a=s(5155),r=s(2115),n=s(1848),i=s(1719),l=s(1902),o=s(8867),c=s(9602);let d=n.bL;n.YJ;let m=n.WT,u=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(n.l9,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...l,children:[r,(0,a.jsx)(n.In,{asChild:!0,children:(0,a.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=n.l9.displayName;let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.PP,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})});h.displayName=n.PP.displayName;let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.wn,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})});x.displayName=n.wn.displayName;let p=r.forwardRef((e,t)=>{let{className:s,children:r,position:i="popper",...l}=e;return(0,a.jsx)(n.ZL,{children:(0,a.jsxs)(n.UC,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...l,children:[(0,a.jsx)(h,{}),(0,a.jsx)(n.LM,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(x,{})]})})});p.displayName=n.UC.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.JU,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=n.JU.displayName;let g=r.forwardRef((e,t)=>{let{className:s,children:r,...i}=e;return(0,a.jsxs)(n.q7,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.VF,{children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})}),(0,a.jsx)(n.p4,{children:r})]})});g.displayName=n.q7.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=n.wv.displayName},2581:(e,t,s)=>{"use strict";s.d(t,{d:()=>l});var a=s(5155),r=s(2115),n=s(2413),i=s(9602);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.bL,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...r,ref:t,children:(0,a.jsx)(n.zi,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});l.displayName=n.bL.displayName},7364:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(7401).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6062:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(7401).A)("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]])},2413:(e,t,s)=>{"use strict";s.d(t,{bL:()=>N,zi:()=>w});var a=s(2115),r=s(3610),n=s(8068),i=s(8166),l=s(1488),o=s(858),c=s(7510),d=s(3360),m=s(5155),u="Switch",[h,x]=(0,i.A)(u),[p,g]=h(u),f=a.forwardRef((e,t)=>{let{__scopeSwitch:s,name:i,checked:o,defaultChecked:c,required:u,disabled:h,value:x="on",onCheckedChange:g,form:f,...b}=e,[j,N]=a.useState(null),w=(0,n.s)(t,e=>N(e)),k=a.useRef(!1),C=!j||f||!!j.closest("form"),[A=!1,S]=(0,l.i)({prop:o,defaultProp:c,onChange:g});return(0,m.jsxs)(p,{scope:s,checked:A,disabled:h,children:[(0,m.jsx)(d.sG.button,{type:"button",role:"switch","aria-checked":A,"aria-required":u,"data-state":y(A),"data-disabled":h?"":void 0,disabled:h,value:x,...b,ref:w,onClick:(0,r.m)(e.onClick,e=>{S(e=>!e),C&&(k.current=e.isPropagationStopped(),k.current||e.stopPropagation())})}),C&&(0,m.jsx)(v,{control:j,bubbles:!k.current,name:i,value:x,checked:A,required:u,disabled:h,form:f,style:{transform:"translateX(-100%)"}})]})});f.displayName=u;var b="SwitchThumb",j=a.forwardRef((e,t)=>{let{__scopeSwitch:s,...a}=e,r=g(b,s);return(0,m.jsx)(d.sG.span,{"data-state":y(r.checked),"data-disabled":r.disabled?"":void 0,...a,ref:t})});j.displayName=b;var v=e=>{let{control:t,checked:s,bubbles:r=!0,...n}=e,i=a.useRef(null),l=(0,o.Z)(s),d=(0,c.X)(t);return a.useEffect(()=>{let e=i.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(l!==s&&t){let a=new Event("click",{bubbles:r});t.call(e,s),e.dispatchEvent(a)}},[l,s,r]),(0,m.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...n,tabIndex:-1,ref:i,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function y(e){return e?"checked":"unchecked"}var N=f,w=j}},e=>{var t=t=>e(e.s=t);e.O(0,[175,565,903,874,786,441,517,358],()=>t(3667)),_N_E=e.O()}]);