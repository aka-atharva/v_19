(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{3667:(e,t,s)=>{Promise.resolve().then(s.bind(s,8782))},8782:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eh});var a=s(5155),r=s(425),i=s(4110),n=s(2115),o=s(8173),l=s.n(o),c=s(7947),d=s(6062),m=s(2823),u=s(6745),h=s(2640),x=s(8236),p=s(7364),g=s(1069),f=s(6046);async function b(){try{let e="http://localhost:9595/api",t=localStorage.getItem("token"),s={Authorization:"Bearer ".concat(t),Accept:"application/json","Content-Type":"application/json"},a=await fetch("".concat(e,"/admin/stats"),{headers:s}),r=await fetch("".concat(e,"/admin/users"),{headers:s}),i=await fetch("".concat(e,"/admin/settings"),{headers:s});if(!a.ok||!r.ok||!i.ok)throw console.error("Failed to fetch admin data:",{stats:a.status,users:r.status,settings:i.status}),Error("Failed to fetch admin data");let n=await a.json(),o=await r.json(),l=await i.json(),c=[];try{let t=new Date().getTime(),a=await fetch("".concat(e,"/admin/activity?limit=50&_t=").concat(t),{headers:s});if(a.ok)c=await a.json(),console.log("Fetched activity data:",c),c=c.map(e=>({...e,username:e.username||"anonymous"}));else throw console.warn("Activity logs fetch returned non-OK status:",a.status),Error("Failed to fetch activity logs: ".concat(a.statusText))}catch(e){console.error("Error fetching activity logs:",e),c=[{id:1,action:"User login",username:"admin",timestamp:new Date().toISOString(),details:"Activity log system initialized with fallback data",page_url:null}]}return{stats:n,users:o,activity:c,systemSettings:l}}catch(e){return console.error("Error fetching admin data:",e),{stats:{total_users:42,active_users:38,researchers:15,regular_users:26,system_uptime:"3 days, 7 hours",database_size:"42.5 MB"},users:[{id:1,username:"admin",email:"admin@example.com",role:"admin",is_active:!0,created_at:new Date().toISOString()},{id:2,username:"researcher",email:"researcher@example.com",role:"researcher",is_active:!0,created_at:new Date(Date.now()-864e5).toISOString()},{id:3,username:"user",email:"user@example.com",role:"user",is_active:!0,created_at:new Date(Date.now()-1728e5).toISOString()}],activity:[{id:1,action:"Login",username:"admin",timestamp:new Date().toISOString(),details:"User admin logged in successfully",page_url:null},{id:2,action:"Page visit",username:"researcher",timestamp:new Date(Date.now()-9e5).toISOString(),details:"Visited dashboard page",page_url:"/datapuur/dashboard"},{id:3,action:"Failed login attempt",username:"unknown",timestamp:new Date(Date.now()-18e5).toISOString(),details:"Invalid credentials",page_url:null}],systemSettings:{maintenance_mode:!1,debug_mode:!0,api_rate_limiting:!0,last_backup:new Date(Date.now()-864e5).toISOString()}}}}async function j(e){try{let t=localStorage.getItem("token"),s=await fetch("".concat("http://localhost:9595/api","/admin/users"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){let e=await s.json();throw Error(e.detail||"Failed to create user")}let a=await s.json();return a.created_at||(a.created_at=new Date().toISOString()),a}catch(e){throw console.error("Error creating user:",e),e}}async function v(e,t){try{let s=localStorage.getItem("token"),a=await fetch("".concat("http://localhost:9595/api","/admin/users/").concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(s),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){let e=await a.json();throw Error(e.detail||"Failed to update user")}return await a.json()}catch(e){throw console.error("Error updating user:",e),e}}async function y(e){try{let t=localStorage.getItem("token"),s=await fetch("".concat("http://localhost:9595/api","/admin/users/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t),Accept:"application/json","Content-Type":"application/json"}});if(!s.ok){let e=await s.json();throw Error(e.detail||"Failed to delete user")}return}catch(e){throw console.error("Error deleting user:",e),e}}async function N(e,t){try{let s=localStorage.getItem("token"),a=await fetch("".concat("http://localhost:9595/api","/admin/settings"),{method:"PUT",headers:{Authorization:"Bearer ".concat(s),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({[e]:t})});if(!a.ok){let e=await a.json();throw Error(e.detail||"Failed to update system setting")}return await a.json()}catch(e){throw console.error("Error updating system setting:",e),e}}async function w(){try{let e=localStorage.getItem("token"),t=await fetch("".concat("http://localhost:9595/api","/admin/backup"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),Accept:"application/json","Content-Type":"application/json"}});if(!t.ok){let e=await t.json();throw Error(e.detail||"Failed to run backup")}return await t.json()}catch(e){throw console.error("Error running backup:",e),e}}async function k(){try{let e=localStorage.getItem("token"),t=await fetch("".concat("http://localhost:9595/api","/admin/export-data"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),Accept:"application/json","Content-Type":"application/json"}});if(!t.ok){let e=await t.json();throw Error(e.detail||"Failed to export data")}return await t.json()}catch(e){throw console.error("Error exporting data:",e),e}}async function A(e){try{let t=localStorage.getItem("token"),s=await fetch("".concat("http://localhost:9595/api","/admin/activity/clear").concat(e?"?days=".concat(e):""),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t),Accept:"application/json","Content-Type":"application/json"}});if(!s.ok){let e=await s.json();throw Error(e.detail||"Failed to clear activity logs")}return}catch(e){throw console.error("Error clearing activity logs:",e),e}}async function C(){try{let e=localStorage.getItem("token"),t=await fetch("".concat("http://localhost:9595/api","/admin/cleanup-data"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),Accept:"application/json","Content-Type":"application/json"}});if(!t.ok){let e=await t.json();throw Error(e.detail||"Failed to cleanup data")}return await t.json()}catch(e){throw console.error("Error cleaning up data:",e),e}}var S=s(5472);let _=(0,s(9827).v)(e=>({loading:!1,setLoading:t=>e({loading:t}),error:null,setError:t=>e({error:t}),notification:null,setNotification:t=>e({notification:t}),stats:null,setStats:t=>e({stats:t}),users:[],setUsers:t=>e({users:t}),activity:[],setActivity:t=>e({activity:t}),systemSettings:null,setSystemSettings:t=>e({systemSettings:t}),roles:[{id:1,name:"admin",description:"Administrator with full access",permissions:["data:read","data:write","user:read","user:write","role:read","role:write"],is_system_role:!0},{id:2,name:"user",description:"Regular user with limited access",permissions:["data:read"],is_system_role:!0},{id:3,name:"researcher",description:"Researcher with data access",permissions:["data:read","data:write","schema:read","ingestion:read"],is_system_role:!0}],setRoles:t=>e({roles:t}),addRole:t=>e(e=>({roles:[...e.roles,t]})),updateRole:t=>e(e=>({roles:e.roles.map(e=>e.id===t.id?t:e)})),deleteRole:t=>e(e=>({roles:e.roles.filter(e=>e.id!==t)})),addRoleIfNotExists:(t,s)=>e(e=>{if(!e.roles.find(e=>e.name===t)){let a=e.roles.length>0?Math.max(...e.roles.map(e=>e.id||0)):0;return{roles:[...e.roles,{id:a+1,name:t,description:s||"",permissions:[],is_system_role:!1}]}}return e}),availablePermissions:["data:read","data:write","user:read","user:write","role:read","role:write","schema:read","schema:write","ingestion:read","ingestion:write"],setAvailablePermissions:t=>e({availablePermissions:t}),isProcessing:!1,setIsProcessing:t=>e({isProcessing:t}),datasets:[],setDatasets:t=>e({datasets:t}),datasetDetails:null,setDatasetDetails:t=>e({datasetDetails:t}),schemas:[],setSchemas:t=>e({schemas:t}),schemaDetails:null,setSchemaDetails:t=>e({schemaDetails:t}),ingestions:[],setIngestions:t=>e({ingestions:t}),ingestionDetails:null,setIngestionDetails:t=>e({ingestionDetails:t}),ingestionLogs:[],setIngestionLogs:t=>e({ingestionLogs:t}),notifications:[],addNotification:t=>e(e=>({notifications:[...e.notifications,{...t,id:Date.now().toString()}]})),removeNotification:t=>e(e=>({notifications:e.notifications.filter(e=>e.id!==t)}))}));var E=s(1476);function F(){let{stats:e,activity:t}=_(),s={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return e?(0,a.jsxs)(c.P.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"System Overview"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)(c.P.div,{variants:s,whileHover:{scale:1.02},className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border shadow-md hover:shadow-lg transition-shadow duration-300",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-foreground mb-4 flex items-center",children:[(0,a.jsx)(m.A,{className:"h-5 w-5 mr-2 text-primary"}),"User Statistics"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Total Users:"}),(0,a.jsx)("span",{className:"text-foreground font-medium",children:(null==e?void 0:e.total_users)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Active Users:"}),(0,a.jsx)("span",{className:"text-foreground font-medium",children:(null==e?void 0:e.active_users)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Researchers:"}),(0,a.jsx)("span",{className:"text-foreground font-medium",children:(null==e?void 0:e.researchers)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Regular Users:"}),(0,a.jsx)("span",{className:"text-foreground font-medium",children:(null==e?void 0:e.regular_users)||0})]})]})]}),(0,a.jsxs)(c.P.div,{variants:s,whileHover:{scale:1.02},className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border shadow-md hover:shadow-lg transition-shadow duration-300",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-foreground mb-4 flex items-center",children:[(0,a.jsx)(E.A,{className:"h-5 w-5 mr-2 text-secondary"}),"System Status"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Uptime:"}),(0,a.jsx)("span",{className:"text-foreground font-medium",children:(null==e?void 0:e.system_uptime)||"N/A"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Database Size:"}),(0,a.jsx)("span",{className:"text-foreground font-medium",children:(null==e?void 0:e.database_size)||"N/A"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Status:"}),(0,a.jsx)("span",{className:"text-primary font-medium",children:"Operational"})]})]})]}),(0,a.jsxs)(c.P.div,{variants:s,whileHover:{scale:1.02},className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border shadow-md hover:shadow-lg transition-shadow duration-300",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-foreground mb-4 flex items-center",children:[(0,a.jsx)(u.A,{className:"h-5 w-5 mr-2 text-primary"}),"Recent Activity"]}),t&&t.length>0?(0,a.jsx)("div",{className:"space-y-3",children:t.slice(0,3).map((e,t)=>(0,a.jsxs)(c.P.div,{variants:e,className:"text-sm p-2 rounded-md bg-background/50 hover:bg-background transition-colors",children:[(0,a.jsx)("div",{className:"text-foreground font-medium",children:e.action}),(0,a.jsxs)("div",{className:"text-muted-foreground text-xs",children:[new Date(e.timestamp).toLocaleString()," - ",e.username]})]},e.id||t))}):(0,a.jsx)("p",{className:"text-muted-foreground",children:"No recent activity"})]})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"System Overview"}),(0,a.jsx)("div",{className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading system statistics..."})})]})}var D=s(7517),T=s(4085),R=s(1773),I=s(7837),P=s(2336),L=s(5785),O=s(2581),B=s(745);function U(e){let{open:t,onOpenChange:s,user:r}=e,{users:i,setUsers:o,isProcessing:l,setIsProcessing:c,setNotification:d,addRoleIfNotExists:m}=_(),[u,h]=(0,n.useState)({username:r.username,email:r.email,role:r.role,is_active:r.is_active}),{roles:x}=_();(0,n.useEffect)(()=>{r.role&&m(r.role)},[r.role,m]);let p=async()=>{c(!0);try{m(u.role);let e=await v(r.id,u);o(i.map(t=>t.id===e.id?e:t)),d({type:"success",message:"User ".concat(e.username," updated successfully")}),s(!1),setTimeout(()=>d(null),3e3)}catch(e){console.error("Error updating user:",e),d({type:"error",message:e.message||"Failed to update user"}),setTimeout(()=>d(null),3e3)}finally{c(!1)}};return(0,a.jsx)(I.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(I.Cf,{className:"bg-card border border-border text-card-foreground",children:[(0,a.jsx)(I.c7,{children:(0,a.jsx)(I.L3,{children:"Edit User"})}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(L.J,{htmlFor:"username",children:"Username"}),(0,a.jsx)(P.p,{id:"username",value:u.username,onChange:e=>h({...u,username:e.target.value}),className:"bg-background border-input text-foreground",disabled:"admin"===r.username})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(L.J,{htmlFor:"email",children:"Email"}),(0,a.jsx)(P.p,{id:"email",value:u.email,onChange:e=>h({...u,email:e.target.value}),className:"bg-background border-input text-foreground"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(L.J,{htmlFor:"role",children:"Role"}),(0,a.jsxs)(B.l6,{value:u.role,onValueChange:e=>h({...u,role:e}),disabled:"admin"===r.username,children:[(0,a.jsx)(B.bq,{className:"bg-background border-input text-foreground",children:(0,a.jsx)(B.yv,{placeholder:"Select a role"})}),(0,a.jsx)(B.gC,{className:"bg-popover border border-border text-popover-foreground",children:x.map(e=>(0,a.jsx)(B.eb,{value:e.name,children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(O.d,{id:"is_active",checked:u.is_active,onCheckedChange:e=>h({...u,is_active:e}),disabled:"admin"===r.username}),(0,a.jsx)(L.J,{htmlFor:"is_active",children:"Active"})]})]}),(0,a.jsxs)(I.Es,{children:[(0,a.jsx)(T.Button,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,a.jsx)(T.Button,{className:"bg-violet-600 hover:bg-violet-700 text-white btn-glow",onClick:p,disabled:l,children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.A,{className:"h-3 w-3 mr-1 animate-spin text-white"}),"Saving..."]}):"Save Changes"})]})]})})}function z(e){let{open:t,onOpenChange:s,user:r}=e,{users:i,setUsers:n,isProcessing:o,setIsProcessing:l,setNotification:c}=_(),d=async()=>{l(!0);try{await y(r.id),n(i.filter(e=>e.id!==r.id)),c({type:"success",message:"User ".concat(r.username," deleted successfully")}),s(!1),setTimeout(()=>c(null),3e3)}catch(e){console.error("Error deleting user:",e),c({type:"error",message:e.message||"Failed to delete user"}),setTimeout(()=>c(null),3e3)}finally{l(!1)}};return(0,a.jsx)(I.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(I.Cf,{className:"bg-card border border-border text-card-foreground",children:[(0,a.jsx)(I.c7,{children:(0,a.jsx)(I.L3,{children:"Delete User"})}),(0,a.jsxs)("div",{className:"py-4",children:[(0,a.jsxs)("p",{children:["Are you sure you want to delete user ",(0,a.jsx)("strong",{children:r.username}),"?"]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"This action cannot be undone."})]}),(0,a.jsxs)(I.Es,{children:[(0,a.jsx)(T.Button,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,a.jsx)(T.Button,{className:"bg-destructive hover:bg-destructive/80 text-white",onClick:d,disabled:o,children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.A,{className:"h-3 w-3 mr-1 animate-spin text-white"}),"Deleting..."]}):"Delete User"})]})]})})}function J(e){let{open:t,onOpenChange:s}=e,{users:r,setUsers:i,isProcessing:o,setIsProcessing:l,setNotification:c,roles:d,addRoleIfNotExists:m}=_(),[u,h]=(0,n.useState)({username:"",email:"",password:"",role:"user",is_active:!0}),x=async()=>{if(!u.username||!u.email||!u.password){c({type:"error",message:"Please fill in all required fields"});return}m(u.role),l(!0);try{let e=await j(u);e.created_at||(e.created_at=new Date().toISOString()),i([...r,e]),c({type:"success",message:"User ".concat(e.username," created successfully")}),s(!1),h({username:"",email:"",password:"",role:"user",is_active:!0}),setTimeout(()=>c(null),3e3)}catch(e){console.error("Error adding user:",e),c({type:"error",message:e.message||"Failed to create user"}),setTimeout(()=>c(null),3e3)}finally{l(!1)}};return(0,a.jsx)(I.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(I.Cf,{className:"bg-card border border-border text-card-foreground",children:[(0,a.jsx)(I.c7,{children:(0,a.jsx)(I.L3,{children:"Add New User"})}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(L.J,{htmlFor:"username",children:["Username ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsx)(P.p,{id:"username",value:u.username,onChange:e=>h({...u,username:e.target.value}),className:"bg-background border-input text-foreground",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(L.J,{htmlFor:"email",children:["Email ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsx)(P.p,{id:"email",type:"email",value:u.email,onChange:e=>h({...u,email:e.target.value}),className:"bg-background border-input text-foreground",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(L.J,{htmlFor:"password",children:["Password ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsx)(P.p,{id:"password",type:"password",value:u.password,onChange:e=>h({...u,password:e.target.value}),className:"bg-background border-input text-foreground",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(L.J,{htmlFor:"role",children:"Role"}),(0,a.jsxs)(B.l6,{value:u.role,onValueChange:e=>h({...u,role:e}),children:[(0,a.jsx)(B.bq,{className:"bg-background border-input text-foreground",children:(0,a.jsx)(B.yv,{placeholder:"Select a role"})}),(0,a.jsx)(B.gC,{className:"bg-popover border border-border text-popover-foreground",children:d.map(e=>(0,a.jsx)(B.eb,{value:e.name,children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(O.d,{id:"is_active",checked:u.is_active,onCheckedChange:e=>h({...u,is_active:e})}),(0,a.jsx)(L.J,{htmlFor:"is_active",children:"Active"})]})]}),(0,a.jsxs)(I.Es,{children:[(0,a.jsx)(T.Button,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,a.jsx)(T.Button,{className:"bg-violet-600 hover:bg-violet-700 text-white btn-glow",onClick:x,disabled:o,children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.A,{className:"h-3 w-3 mr-1 animate-spin text-white"}),"Creating..."]}):"Add User"})]})]})})}function M(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!e)return"N/A";try{let s="string"==typeof e?new Date(e):e;if(isNaN(s.getTime()))return"Invalid date";let a={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return t&&(a.second="2-digit"),s.toLocaleString("en-US",a)}catch(e){return console.error("Error formatting date:",e),"Error formatting date"}}function q(e){if(!e)return"N/A";try{let t="string"==typeof e?new Date(e):e;if(isNaN(t.getTime()))return"Invalid date";let s=new Date,a=Math.floor((s.getTime()-t.getTime())/1e3);if(a<60)return"".concat(a," second").concat(1!==a?"s":""," ago");let r=Math.floor(a/60);if(r<60)return"".concat(r," minute").concat(1!==r?"s":""," ago");let i=Math.floor(r/60);if(i<24)return"".concat(i," hour").concat(1!==i?"s":""," ago");let n=Math.floor(i/24);if(n<30)return"".concat(n," day").concat(1!==n?"s":""," ago");let o=Math.floor(n/30);if(o<12)return"".concat(o," month").concat(1!==o?"s":""," ago");let l=Math.floor(o/12);return"".concat(l," year").concat(1!==l?"s":""," ago")}catch(e){return console.error("Error calculating relative time:",e),"Error calculating time"}}function V(){let{users:e}=_(),[t,s]=(0,n.useState)(!1),[r,i]=(0,n.useState)(!1),[o,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null),m=e=>{d(e),s(!0)},u=e=>{d(e),i(!0)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"User Management"}),(0,a.jsxs)(T.Button,{className:"bg-violet-600 hover:bg-violet-700 text-white btn-glow",onClick:()=>l(!0),children:[(0,a.jsx)(D.A,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),(0,a.jsx)("div",{className:"bg-card p-4 rounded-lg border border-border overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-border",children:[(0,a.jsx)("th",{className:"p-3 text-muted-foreground",children:"ID"}),(0,a.jsx)("th",{className:"p-3 text-muted-foreground",children:"Username"}),(0,a.jsx)("th",{className:"p-3 text-muted-foreground",children:"Email"}),(0,a.jsx)("th",{className:"p-3 text-muted-foreground",children:"Role"}),(0,a.jsx)("th",{className:"p-3 text-muted-foreground",children:"Status"}),(0,a.jsx)("th",{className:"p-3 text-muted-foreground",children:"Created"}),(0,a.jsx)("th",{className:"p-3 text-muted-foreground",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:null==e?void 0:e.map(e=>(0,a.jsxs)("tr",{className:"border-b border-border hover:bg-accent/50",children:[(0,a.jsx)("td",{className:"p-3 text-card-foreground",children:e.id}),(0,a.jsx)("td",{className:"p-3 text-card-foreground",children:e.username}),(0,a.jsx)("td",{className:"p-3 text-card-foreground",children:e.email}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("admin"===e.role?"bg-purple-500 text-white":"researcher"===e.role?"bg-blue-500 text-white":"bg-gray-500 text-white"),children:e.role})}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(e.is_active?"bg-green-500 text-white":"bg-red-500 text-white"),children:e.is_active?"Active":"Inactive"})}),(0,a.jsx)("td",{className:"p-3 text-muted-foreground",children:e.created_at?M(e.created_at,!1):"N/A"}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(T.Button,{variant:"outline",size:"sm",className:"border-violet-600 text-violet-600 hover:bg-violet-600/20 text-xs h-7",onClick:()=>m(e),children:"Edit"}),"admin"!==e.username&&(0,a.jsx)(T.Button,{variant:"outline",size:"sm",className:"text-xs h-7 border-destructive text-destructive hover:bg-destructive/20",onClick:()=>u(e),children:"Delete"})]})})]},e.id))})]})}),t&&(0,a.jsx)(U,{open:t,onOpenChange:s,user:c}),r&&(0,a.jsx)(z,{open:r,onOpenChange:i,user:c}),(0,a.jsx)(J,{open:o,onOpenChange:l})]})}var G=s(4267),H=s(9993),Y=s(1466),W=s(6122);function Z(){let{activity:e,setActivity:t,users:s,isProcessing:r,setIsProcessing:i,setNotification:o}=_(),[l,c]=(0,n.useState)(!1),[d,m]=(0,n.useState)(new Date),[u,h]=(0,n.useState)(10),[x,p]=(0,n.useState)(""),[g,f]=(0,n.useState)(""),[j,v]=(0,n.useState)(""),[y,N]=(0,n.useState)(!1),[w,k]=(0,n.useState)([]),[C,S]=(0,n.useState)([]),[E,F]=(0,n.useState)([]);(0,n.useEffect)(()=>{if(!l)return;let e=setInterval(()=>{D(!1),m(new Date)},1e3*u);return()=>clearInterval(e)},[l,u]),(0,n.useEffect)(()=>{e&&e.length>0&&(k([...new Set(e.map(e=>e.username))].filter(Boolean).sort()),S([...new Set(e.map(e=>e.action))].filter(Boolean).sort()),F([...new Set(e.map(e=>e.page_url).filter(Boolean))].sort()))},[e]),(0,n.useEffect)(()=>{if(e&&e.length>0){let s=e.map(e=>{if((!e.username||"system"===e.username)&&"Login"===e.action&&e.details){let t=e.details.match(/User (\w+) logged in/);if(t&&t[1])return console.log("Fixing username for login activity: ".concat(t[1])),{...e,username:t[1]}}return e});JSON.stringify(s)!==JSON.stringify(e)&&(console.log("Updating activity data with processed usernames"),t(s))}},[e,t]);let D=async function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];e&&i(!0);try{let s=(await b()).activity.map(e=>({...e,formattedTime:M(e.timestamp),relativeTime:q(e.timestamp)}));t(s),e&&(o({type:"success",message:"Activity logs refreshed successfully"}),setTimeout(()=>o(null),3e3))}catch(t){console.error("Error refreshing activity logs:",t),e&&o({type:"error",message:"Failed to refresh activity logs"})}finally{e&&i(!1)}},I=async()=>{if(confirm("Are you sure you want to clear old activity logs? This cannot be undone.")){i(!0);try{await A(30),o({type:"success",message:"Activity logs older than 30 days have been cleared"});let e=await b();t(e.activity)}catch(e){console.error("Error clearing logs:",e),o({type:"error",message:"Failed to clear activity logs"})}finally{i(!1)}}},P=e.filter(e=>{let t=!x||"all"===x||e.username===x,s=!g||"all"===g||e.action===g,a=!j||"all"===j||e.page_url&&e.page_url.includes(j);return t&&s&&a}),L=(()=>{let t={};return console.log("Activity data for summary:",e),e.forEach(e=>{if(!e.username){console.log("Skipping item with no username:",e);return}let s=e.username;console.log("Processing activity for user: ".concat(s,", action: ").concat(e.action)),t[s]||(t[s]={totalActions:0,pageVisits:0,loginCount:0,lastActive:null}),t[s].totalActions++,"Page visit"===e.action?t[s].pageVisits++:"Login"===e.action&&t[s].loginCount++;let a=new Date(e.timestamp);(!t[s].lastActive||a>new Date(t[s].lastActive))&&(t[s].lastActive=e.timestamp)}),console.log("Generated activity summary:",t),t})(),O=e=>{if(!e)return"N/A";try{let t=new Date(e);if(isNaN(t.getTime()))return"Invalid Date";return t.toLocaleString()}catch(e){return"Invalid Date"}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Activity Log"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("div",{className:"flex items-center mr-4",children:[(0,a.jsx)("input",{type:"checkbox",id:"auto-refresh",checked:l,onChange:e=>c(e.target.checked),className:"mr-2"}),(0,a.jsx)("label",{htmlFor:"auto-refresh",className:"text-sm text-muted-foreground",children:"Auto-refresh"})]}),l&&(0,a.jsxs)("div",{className:"flex items-center mr-4",children:[(0,a.jsx)("label",{htmlFor:"refresh-interval",className:"text-sm text-muted-foreground mr-2",children:"Every"}),(0,a.jsxs)("select",{id:"refresh-interval",value:u,onChange:e=>h(Number(e.target.value)),className:"bg-background border border-input rounded px-2 py-1 text-sm",children:[(0,a.jsx)("option",{value:"5",children:"5 sec"}),(0,a.jsx)("option",{value:"10",children:"10 sec"}),(0,a.jsx)("option",{value:"30",children:"30 sec"}),(0,a.jsx)("option",{value:"60",children:"1 min"})]})]}),(0,a.jsxs)(T.Button,{variant:"outline",className:"border-violet-600 text-violet-600 hover:bg-violet-600/20",onClick:()=>N(!y),children:[(0,a.jsx)(G.A,{className:"h-4 w-4 mr-2"}),y?"Hide Filters":"Show Filters"]}),(0,a.jsxs)(T.Button,{variant:"outline",className:"border-violet-600 text-violet-600 hover:bg-violet-600/20",onClick:()=>D(),disabled:r,children:[(0,a.jsx)(R.A,{className:"h-4 w-4 mr-2 ".concat(r?"animate-spin":"")}),"Refresh"]}),(0,a.jsxs)(T.Button,{variant:"outline",className:"border-destructive text-destructive hover:bg-destructive/20",onClick:I,disabled:r,children:[(0,a.jsx)(H.A,{className:"h-4 w-4 mr-2"}),"Clear Old Logs"]})]})]}),l&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground text-right",children:["Last refreshed: ",O(d)," (auto-refreshes every ",u," seconds)"]}),(0,a.jsxs)("div",{className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"User Activity Summary"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(L).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"bg-background/50 backdrop-blur-sm p-4 rounded-lg border border-border hover:shadow-md transition-shadow duration-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(Y.A,{className:"h-4 w-4 text-primary"}),(0,a.jsx)("span",{className:"font-medium text-foreground",children:t})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Total Actions:"}),(0,a.jsx)("span",{className:"text-foreground",children:s.totalActions})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Page Visits:"}),(0,a.jsx)("span",{className:"text-foreground",children:s.pageVisits})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Last Active:"}),(0,a.jsx)("span",{className:"text-foreground",children:O(s.lastActive)})]})]})]},t)})})]}),y&&(0,a.jsx)("div",{className:"bg-card p-4 rounded-lg border border-border mb-4",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-end",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-1 block",children:"Filter by User"}),(0,a.jsxs)(B.l6,{value:x,onValueChange:p,children:[(0,a.jsx)(B.bq,{children:(0,a.jsx)(B.yv,{placeholder:"All Users"})}),(0,a.jsxs)(B.gC,{children:[(0,a.jsx)(B.eb,{value:"all",children:"All Users"}),w.map(e=>(0,a.jsx)(B.eb,{value:e,children:e},e))]})]})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-1 block",children:"Filter by Action"}),(0,a.jsxs)(B.l6,{value:g,onValueChange:f,children:[(0,a.jsx)(B.bq,{children:(0,a.jsx)(B.yv,{placeholder:"All Actions"})}),(0,a.jsxs)(B.gC,{children:[(0,a.jsx)(B.eb,{value:"all",children:"All Actions"}),C.map(e=>(0,a.jsx)(B.eb,{value:e,children:e},e))]})]})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-1 block",children:"Filter by Page"}),(0,a.jsxs)(B.l6,{value:j,onValueChange:v,children:[(0,a.jsx)(B.bq,{children:(0,a.jsx)(B.yv,{placeholder:"All Pages"})}),(0,a.jsxs)(B.gC,{children:[(0,a.jsx)(B.eb,{value:"all",children:"All Pages"}),E.map(e=>(0,a.jsx)(B.eb,{value:e,children:e},e))]})]})]}),(0,a.jsx)(T.Button,{variant:"outline",onClick:()=>{p(""),f(""),v("")},className:"mb-0",children:"Reset Filters"})]})}),(0,a.jsx)("div",{className:"bg-card p-4 rounded-lg border border-border",children:0===P.length?(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No activity logs found"}):(0,a.jsx)("div",{className:"space-y-4",children:P.map((e,t)=>(0,a.jsxs)("div",{className:"p-3 border-b border-border last:border-0",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"text-card-foreground font-medium ".concat("Login"===e.action?"text-violet-500":""),children:e.action||"Unknown Action"}),(0,a.jsxs)("div",{className:"text-muted-foreground text-sm flex items-center gap-2",children:[(0,a.jsx)("span",{children:O(e.timestamp)}),(0,a.jsxs)("span",{className:"text-xs opacity-70",children:["(",q(e.timestamp),")"]})]})]}),(0,a.jsxs)("div",{className:"text-muted-foreground mt-1 flex items-center",children:[(0,a.jsx)(Y.A,{className:"h-4 w-4 mr-1 ".concat("Login"===e.action?"text-violet-500":"")}),(0,a.jsx)("span",{className:"font-medium",children:e.username||"Anonymous"})]}),e.details&&(0,a.jsx)("div",{className:"text-muted-foreground text-sm mt-1",children:e.details}),e.page_url&&(0,a.jsxs)("div",{className:"text-violet-500 text-sm mt-1 flex items-center",children:[(0,a.jsx)(W.A,{className:"h-3 w-3 mr-1"}),e.page_url]}),e.ip_address&&(0,a.jsxs)("div",{className:"text-muted-foreground text-xs mt-1",children:["IP: ",e.ip_address]})]},e.id||t))})}),P.length>0&&(0,a.jsxs)("div",{className:"text-center text-muted-foreground text-sm",children:["Showing ",P.length," of ",e.length," activities"]})]})}var K=s(6352),Q=s(8867),X=s(9602);let $=n.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(K.bL,{ref:t,className:(0,X.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...r,children:(0,a.jsx)(K.C1,{className:(0,X.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(Q.A,{className:"h-4 w-4"})})})});async function ee(){try{let e=localStorage.getItem("token"),t=await fetch("".concat("http://localhost:9595/api","/admin/roles"),{headers:{Authorization:"Bearer ".concat(e),Accept:"application/json","Content-Type":"application/json"}});if(!t.ok)throw Error("Failed to fetch roles: ".concat(t.statusText));let s=await t.json();console.log("Fetched roles from backend:",s);let{setRoles:a}=_.getState(),r=s.map(e=>({id:e.id,name:e.name,description:e.description||"",permissions:e.permissions_list||[],is_system_role:e.is_system_role||!1,created_at:e.created_at,updated_at:e.updated_at}));return a(r),await et(),r}catch(s){console.error("Error syncing roles:",s);let{setRoles:e}=_.getState(),t=[{id:1,name:"admin",description:"Administrator with full access",permissions:["data:read","data:write","user:read","user:write","role:read","role:write"],is_system_role:!0},{id:2,name:"user",description:"Regular user with limited access",permissions:["data:read"],is_system_role:!0},{id:3,name:"researcher",description:"Researcher with data access",permissions:["data:read","data:write","schema:read","ingestion:read"],is_system_role:!0}];return e(t),t}}async function et(){try{let e=localStorage.getItem("token"),t=await fetch("".concat("http://localhost:9595/api","/admin/permissions"),{headers:{Authorization:"Bearer ".concat(e),Accept:"application/json","Content-Type":"application/json"}});if(!t.ok)throw Error("Failed to fetch permissions: ".concat(t.statusText));let s=await t.json();console.log("Fetched permissions from backend:",s);let{setAvailablePermissions:a}=_.getState();return a(s),s}catch(e){return console.error("Error syncing permissions:",e),[]}}async function es(e){try{let t="http://localhost:9595/api",s=localStorage.getItem("token"),a=!e.id,r=a?"".concat(t,"/admin/roles"):"".concat(t,"/admin/roles/").concat(e.id);console.log("Saving role to backend: ".concat(JSON.stringify(e)));let i=await fetch(r,{method:a?"POST":"PUT",headers:{Authorization:"Bearer ".concat(s),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});if(!i.ok){let e=await i.text();throw Error("Failed to save role: ".concat(i.statusText," - ").concat(e))}let n=await i.json();return console.log("Role saved successfully: ".concat(JSON.stringify(n))),n}catch(e){throw console.error("Error saving role:",e),e}}function ea(e){let{open:t,onOpenChange:s,role:r}=e,{roles:i,setRoles:o,availablePermissions:l,isProcessing:c,setIsProcessing:d,setNotification:m}=_(),[u,h]=(0,n.useState)({id:(null==r?void 0:r.id)||0,name:(null==r?void 0:r.name)||"",description:(null==r?void 0:r.description)||"",permissions:(null==r?void 0:r.permissions)||[],is_system_role:(null==r?void 0:r.is_system_role)||!1});(0,n.useEffect)(()=>{r&&h({id:r.id||0,name:r.name||"",description:r.description||"",permissions:r.permissions||[],is_system_role:r.is_system_role||!1})},[r]);let x=e=>{h(t=>{let s=t.permissions.includes(e)?t.permissions.filter(t=>t!==e):[...t.permissions,e];return{...t,permissions:s}})},p=async()=>{if(!u.name){m({type:"error",message:"Role name is required"});return}if(u.is_system_role){m({type:"error",message:"System roles cannot be modified"});return}if(i.some(e=>e.id!==r.id&&e.name.toLowerCase()===u.name.toLowerCase())){m({type:"error",message:'Role "'.concat(u.name,'" already exists')});return}d(!0);try{await es({id:r.id,name:u.name,description:u.description,permissions:u.permissions}),m({type:"success",message:'Role "'.concat(u.name,'" updated successfully')}),s(!1),setTimeout(()=>m(null),3e3)}catch(e){console.error("Error updating role:",e),m({type:"error",message:e.message||"Failed to update role"}),setTimeout(()=>m(null),3e3)}finally{d(!1)}};return(0,a.jsx)(I.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(I.Cf,{className:"bg-card border border-border text-card-foreground",children:[(0,a.jsx)(I.c7,{children:(0,a.jsx)(I.L3,{children:"Edit Role"})}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(L.J,{htmlFor:"name",children:["Role Name ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsx)(P.p,{id:"name",value:u.name,onChange:e=>h({...u,name:e.target.value}),placeholder:"Enter role name",disabled:u.is_system_role}),u.is_system_role&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"System roles cannot be modified"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(L.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)(P.p,{id:"description",value:u.description,onChange:e=>h({...u,description:e.target.value}),placeholder:"Enter role description",disabled:u.is_system_role})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(L.J,{children:"Permissions"}),(0,a.jsx)("div",{className:"space-y-2 border border-border rounded-md p-4 max-h-48 overflow-y-auto",children:l.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)($,{id:"permission-edit-".concat(e),checked:u.permissions.includes(e),onCheckedChange:()=>x(e),disabled:u.is_system_role}),(0,a.jsx)(L.J,{htmlFor:"permission-edit-".concat(e),className:"font-normal cursor-pointer",children:e})]},e))})]})]}),(0,a.jsxs)(I.Es,{children:[(0,a.jsx)(T.Button,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,a.jsx)(T.Button,{onClick:p,disabled:c||u.is_system_role,children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})})}function er(e){let{open:t,onOpenChange:s}=e,{roles:r,setRoles:i,availablePermissions:o,isProcessing:l,setIsProcessing:c,setNotification:d}=_(),[m,u]=(0,n.useState)({name:"",description:"",permissions:[]}),h=e=>{u(t=>{let s=t.permissions.includes(e)?t.permissions.filter(t=>t!==e):[...t.permissions,e];return{...t,permissions:s}})},x=async()=>{if(!m.name){d({type:"error",message:"Role name is required"});return}if(r.some(e=>e.name.toLowerCase()===m.name.toLowerCase())){d({type:"error",message:'Role "'.concat(m.name,'" already exists')});return}c(!0);try{await es({name:m.name,description:m.description,permissions:m.permissions}),d({type:"success",message:'Role "'.concat(m.name,'" created successfully')}),s(!1),u({name:"",description:"",permissions:[]}),setTimeout(()=>d(null),3e3)}catch(e){console.error("Error adding role:",e),d({type:"error",message:e.message||"Failed to create role"}),setTimeout(()=>d(null),3e3)}finally{c(!1)}};return(0,a.jsx)(I.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(I.Cf,{className:"bg-card border border-border text-card-foreground",children:[(0,a.jsx)(I.c7,{children:(0,a.jsx)(I.L3,{children:"Add New Role"})}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(L.J,{htmlFor:"name",children:["Role Name ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsx)(P.p,{id:"name",value:m.name,onChange:e=>u({...m,name:e.target.value}),className:"bg-background border-input text-foreground",placeholder:"e.g., editor",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(L.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)(P.p,{id:"description",value:m.description,onChange:e=>u({...m,description:e.target.value}),className:"bg-background border-input text-foreground",placeholder:"Role description"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(L.J,{children:"Permissions"}),(0,a.jsx)("div",{className:"space-y-2 border border-border rounded-md p-4 max-h-48 overflow-y-auto",children:o.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)($,{id:"permission-".concat(e),checked:m.permissions.includes(e),onCheckedChange:()=>h(e)}),(0,a.jsx)(L.J,{htmlFor:"permission-".concat(e),className:"font-normal cursor-pointer",children:e})]},e))})]})]}),(0,a.jsxs)(I.Es,{children:[(0,a.jsx)(T.Button,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,a.jsx)(T.Button,{className:"bg-violet-600 hover:bg-violet-700 text-white btn-glow",onClick:x,disabled:l,children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.A,{className:"h-3 w-3 mr-1 animate-spin text-white"}),"Creating..."]}):"Add Role"})]})]})})}function ei(){let{roles:e,availablePermissions:t,setNotification:s}=_(),[r,i]=(0,n.useState)(!1),[o,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null),[m,u]=(0,n.useState)(!0),h=e=>{d(e),i(!0)};return(0,n.useEffect)(()=>{(async()=>{u(!0);try{await ee(),console.log("Roles synced successfully")}catch(e){console.error("Failed to sync roles:",e),s({type:"error",message:"Failed to load roles from the server"})}finally{u(!1)}})()},[s]),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Role Management"}),(0,a.jsxs)(T.Button,{className:"bg-violet-600 hover:bg-violet-700 text-white btn-glow",onClick:()=>l(!0),children:[(0,a.jsx)(D.A,{className:"h-4 w-4 mr-2"}),"Add Role"]})]}),(0,a.jsx)("p",{className:"text-muted-foreground mb-6",children:"Configure role-based permissions and access controls for your application."}),(0,a.jsx)("div",{className:"bg-card p-6 rounded-lg border border-border",children:m?(0,a.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-violet-700"})}):0===e.length?(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:'No roles found. Click "Add Role" to create your first role.'}):(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,a.jsx)("div",{className:"p-4 border border-border rounded-lg",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"text-card-foreground font-medium mb-2",children:[e.name,e.is_system_role&&(0,a.jsx)("span",{className:"ml-2 px-2 py-0.5 bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300 rounded text-xs",children:"System"})]}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm mb-2",children:e.description}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:e.permissions&&e.permissions.map(e=>(0,a.jsx)("span",{className:"px-2 py-1 bg-accent rounded-md text-xs text-foreground",children:e},e))})]}),(0,a.jsx)(T.Button,{variant:"outline",size:"sm",className:"border-violet-600 text-violet-600 hover:bg-violet-600/20 text-xs h-7",onClick:()=>h(e),disabled:e.is_system_role,title:e.is_system_role?"System roles cannot be modified":"Edit role",children:"Edit Role"})]})},e.id))})}),(0,a.jsx)(er,{open:o,onOpenChange:l}),c&&(0,a.jsx)(ea,{open:r,onOpenChange:i,role:c})]})}function en(){let{systemSettings:e,setSystemSettings:t,isProcessing:s,setIsProcessing:r,setNotification:i}=_(),n=async(e,s)=>{r(!0);try{let a=await N(e,s);t(a),i({type:"success",message:"".concat(e.replace(/_/g," ")," has been ").concat(s?"enabled":"disabled")}),setTimeout(()=>i(null),3e3)}catch(e){console.error("Error updating setting:",e),i({type:"error",message:"Failed to update setting"}),setTimeout(()=>i(null),3e3)}finally{r(!1)}},o=async()=>{r(!0);try{await w(),i({type:"success",message:"Backup process started"}),setTimeout(()=>{i(null)},3e3)}catch(e){console.error("Error starting backup:",e),i({type:"error",message:"Failed to start backup"}),setTimeout(()=>i(null),3e3)}finally{r(!1)}},l=async()=>{r(!0);try{await k(),i({type:"success",message:"Data export initiated"}),setTimeout(()=>i(null),3e3)}catch(e){console.error("Error exporting data:",e),i({type:"error",message:"Failed to export data"}),setTimeout(()=>i(null),3e3)}finally{r(!1)}},c=async()=>{r(!0);try{await C(),i({type:"success",message:"Data cleanup process started"}),setTimeout(()=>i(null),3e3)}catch(e){console.error("Error cleaning up data:",e),i({type:"error",message:"Failed to clean up data"}),setTimeout(()=>i(null),3e3)}finally{r(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Settings"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-card p-6 rounded-lg border border-border",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-card-foreground mb-4",children:"System Settings"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 border-b border-border",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-card-foreground font-medium",children:"Maintenance Mode"}),(0,a.jsx)("p",{className:"text-muted-foreground text-xs",children:"Temporarily disable access to the application"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(O.d,{id:"maintenance-mode",checked:(null==e?void 0:e.maintenance_mode)||!1,onCheckedChange:e=>n("maintenance_mode",e),disabled:s}),(0,a.jsx)(L.J,{htmlFor:"maintenance-mode",className:"sr-only",children:"Maintenance Mode"})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 border-b border-border",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-card-foreground font-medium",children:"Debug Mode"}),(0,a.jsx)("p",{className:"text-muted-foreground text-xs",children:"Enable detailed error messages and logging"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(O.d,{id:"debug-mode",checked:(null==e?void 0:e.debug_mode)||!1,onCheckedChange:e=>n("debug_mode",e),disabled:s}),(0,a.jsx)(L.J,{htmlFor:"debug-mode",className:"sr-only",children:"Debug Mode"})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 border-b border-border",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-card-foreground font-medium",children:"API Rate Limiting"}),(0,a.jsx)("p",{className:"text-muted-foreground text-xs",children:"Limit API requests per user"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(O.d,{id:"api-rate-limiting",checked:(null==e?void 0:e.api_rate_limiting)||!1,onCheckedChange:e=>n("api_rate_limiting",e),disabled:s}),(0,a.jsx)(L.J,{htmlFor:"api-rate-limiting",className:"sr-only",children:"API Rate Limiting"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-card p-6 rounded-lg border border-border",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-card-foreground mb-4",children:"Data Management"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-3 border-b border-border",children:[(0,a.jsx)("h4",{className:"text-card-foreground font-medium mb-2",children:"Database Backup"}),(0,a.jsxs)("p",{className:"text-muted-foreground text-xs mb-3",children:["Last backup:"," ",(null==e?void 0:e.last_backup)?new Date(e.last_backup).toLocaleString():"Never"]}),(0,a.jsx)(T.Button,{className:"bg-violet-600 hover:bg-violet-700 text-white btn-glow text-xs py-1 h-8",onClick:o,disabled:s,children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.A,{className:"h-3 w-3 mr-1 animate-spin text-white"}),"Running..."]}):"Run Backup Now"})]}),(0,a.jsxs)("div",{className:"p-3 border-b border-border",children:[(0,a.jsx)("h4",{className:"text-card-foreground font-medium mb-2",children:"Data Export"}),(0,a.jsx)("p",{className:"text-muted-foreground text-xs mb-3",children:"Export system data for backup or migration"}),(0,a.jsx)(T.Button,{className:"bg-violet-600 hover:bg-violet-700 text-white btn-glow text-xs py-1 h-8",onClick:l,disabled:s,children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.A,{className:"h-3 w-3 mr-1 animate-spin text-white"}),"Exporting..."]}):"Export Data"})]}),(0,a.jsxs)("div",{className:"p-3 border-b border-border",children:[(0,a.jsx)("h4",{className:"text-card-foreground font-medium mb-2",children:"Data Cleanup"}),(0,a.jsx)("p",{className:"text-muted-foreground text-xs mb-3",children:"Remove old or unused data from the system"}),(0,a.jsx)(T.Button,{className:"bg-violet-600 hover:bg-violet-700 text-white btn-glow text-xs py-1 h-8",onClick:c,disabled:s,children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.A,{className:"h-3 w-3 mr-1 animate-spin text-white"}),"Cleaning..."]}):"Cleanup Data"})]})]})]})]})]})}function eo(e){let{activeTab:t,loading:s,error:r}=e;return s?(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)(S.A,{})}):(0,a.jsxs)(a.Fragment,{children:[r&&(0,a.jsx)("div",{className:"bg-yellow-500/20 border border-yellow-500 text-yellow-700 dark:text-yellow-200 px-4 py-2 rounded-md mb-4",children:(0,a.jsx)("p",{children:r})}),"dashboard"===t&&(0,a.jsx)(F,{}),"users"===t&&(0,a.jsx)(V,{}),"activity"===t&&(0,a.jsx)(Z,{}),"permissions"===t&&(0,a.jsx)(ei,{}),"settings"===t&&(0,a.jsx)(en,{})]})}$.displayName=K.bL.displayName;var el=s(3239),ec=s(1594);function ed(e){let{notification:t}=e;return(0,a.jsxs)(c.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-4 p-3 rounded-md flex items-center backdrop-blur-sm border ".concat("success"===t.type?"bg-primary/10 border-primary text-primary":"bg-destructive/10 border-destructive text-destructive"),children:["success"===t.type?(0,a.jsx)(el.A,{className:"h-5 w-5 mr-2"}):(0,a.jsx)(ec.A,{className:"h-5 w-5 mr-2"}),(0,a.jsx)("p",{children:t.message})]})}function em(){let{user:e}=(0,g.A)();!function(){let{logout:e}=(0,g.A)();(0,f.useRouter)()}();let[t,s]=(0,n.useState)("dashboard"),{loading:i,setLoading:o,error:j,setError:v,notification:y,setNotification:N,stats:w,setStats:k,users:A,setUsers:C,activity:E,setActivity:F,systemSettings:D,setSystemSettings:T,addRoleIfNotExists:R}=_();(0,n.useEffect)(()=>{(async()=>{o(!0);try{let e=await b();e&&(k(e.stats||{}),C(e.users||[]),F(e.activity||[]),T(e.systemSettings||{}),e.users&&e.users.length>0&&e.users.forEach(e=>{e.role&&R(e.role)})),v(null)}catch(e){console.error("Error fetching admin data:",e),v("Failed to load admin data. Using mock data instead.")}finally{o(!1)}})()},[]);let I=[{id:"dashboard",label:"Dashboard",icon:d.A},{id:"users",label:"Users",icon:m.A},{id:"activity",label:"Activity Log",icon:u.A},{id:"permissions",label:"Permissions",icon:h.A},{id:"settings",label:"Settings",icon:x.A}],P={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return(0,a.jsxs)("div",{className:"min-h-screen bg-background antialiased relative overflow-hidden",children:[(0,a.jsx)("div",{className:"h-full w-full absolute inset-0 z-0",children:(0,a.jsx)(r.n,{id:"tsparticlesfullpage",background:"transparent",minSize:.6,maxSize:1.4,particleDensity:100,className:"w-full h-full",particleColor:"var(--foreground)"})}),(0,a.jsxs)("div",{className:"relative z-10 pt-20 px-6 md:px-8",children:[(0,a.jsx)("div",{className:"max-w-7xl mx-auto relative",children:(0,a.jsxs)(l(),{href:"/",className:"absolute -top-12 left-0 z-20 flex items-center justify-center rounded-md bg-card/80 backdrop-blur-sm border border-border hover:bg-accent transition-colors duration-200 px-3 py-2 text-sm","aria-label":"Back to home",children:[(0,a.jsx)(p.A,{className:"w-4 h-4 text-foreground mr-2"}),(0,a.jsx)("span",{className:"text-foreground",children:"Back to Home"})]})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)(c.P.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary",children:"Admin Dashboard"}),(0,a.jsx)(c.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"flex items-center",children:(0,a.jsx)("div",{className:"px-4 py-2 bg-card/80 backdrop-blur-sm rounded-lg border border-border",children:(0,a.jsxs)("span",{className:"text-foreground font-medium",children:["Welcome, ",(0,a.jsx)("span",{className:"text-primary font-bold",children:null==e?void 0:e.username})]})})})]}),y&&(0,a.jsx)(ed,{notification:y}),(0,a.jsxs)(c.P.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border overflow-hidden shadow-md",children:[(0,a.jsx)("div",{className:"flex border-b border-border overflow-x-auto",children:I.map((e,r)=>(0,a.jsxs)(c.P.button,{variants:P,className:"flex items-center space-x-2 px-6 py-4 text-sm font-medium transition-colors whitespace-nowrap ".concat(t===e.id?"text-primary-foreground bg-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground hover:bg-accent"),onClick:()=>s(e.id),children:[(0,a.jsx)(e.icon,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:e.label})]},e.id))}),(0,a.jsxs)("div",{className:"p-6",children:[i&&(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)(S.A,{})}),!i&&(0,a.jsx)(eo,{activeTab:t,loading:i,error:j})]})]})]})]})]})}var eu=s(3726);function eh(){return(0,a.jsx)(eu.A,{requiredRole:"admin",children:(0,a.jsxs)("main",{className:"min-h-screen bg-background antialiased relative overflow-hidden",children:[(0,a.jsx)("div",{className:"h-full w-full absolute inset-0 z-0",children:(0,a.jsx)(r.n,{id:"tsparticlesfullpage",background:"transparent",minSize:.6,maxSize:1.4,particleDensity:100,className:"w-full h-full",particleColor:"var(--foreground)"})}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)(i.A,{}),(0,a.jsx)(em,{})]})]})})}},5472:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(5155),r=s(7947);function i(){return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)(r.P.div,{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full shadow-[0_0_15px_rgba(26,35,126,0.3)]",animate:{rotate:360},transition:{duration:1,repeat:Number.POSITIVE_INFINITY,ease:"linear"}}),(0,a.jsx)("p",{className:"mt-4 text-foreground",children:"Loading data..."})]})}},3726:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(5155),r=s(1069),i=s(6046),n=s(2115),o=s(5472);function l(e){let{children:t,requiredRole:s}=e,{user:l,isLoading:c}=(0,r.A)(),d=(0,i.useRouter)(),m=(0,i.usePathname)();return((0,n.useEffect)(()=>{let e="true"===sessionStorage.getItem("isLoggingOut");c||l?!c&&l&&s&&"admin"!==l.role&&(("admin"!==s||"admin"===l.role)&&("researcher"!==s||["admin","researcher"].includes(l.role))||d.push("/")):e?(sessionStorage.removeItem("isLoggingOut"),d.push("/")):d.push("/login?redirect=".concat(encodeURIComponent(m)))},[l,c,d,m,s]),c)?(0,a.jsx)("div",{className:"min-h-screen bg-black/[0.96] flex items-center justify-center",children:(0,a.jsx)(o.A,{})}):s&&l&&"admin"!==l.role&&("admin"===s&&"admin"!==l.role||"researcher"===s&&!["admin","researcher"].includes(l.role))||!l?null:(0,a.jsx)(a.Fragment,{children:t})}},7837:(e,t,s)=>{"use strict";s.d(t,{Cf:()=>m,Es:()=>h,L3:()=>x,c7:()=>u,lG:()=>l});var a=s(5155),r=s(2115),i=s(6217),n=s(767),o=s(9602);let l=i.bL;i.l9;let c=i.ZL;i.bm;let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.hJ,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});d.displayName=i.hJ.displayName;let m=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(d,{}),(0,a.jsxs)(i.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...l,children:[r,(0,a.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=i.UC.displayName;let u=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};u.displayName="DialogHeader";let h=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};h.displayName="DialogFooter";let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});x.displayName=i.hE.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",s),...r})}).displayName=i.VY.displayName},2336:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var a=s(5155),r=s(2115),i=s(9602);let n=r.forwardRef((e,t)=>{let{className:s,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...n})});n.displayName="Input"},5785:(e,t,s)=>{"use strict";s.d(t,{J:()=>c});var a=s(5155),r=s(2115),i=s(6195),n=s(6421),o=s(9602);let l=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.b,{ref:t,className:(0,o.cn)(l(),s),...r})});c.displayName=i.b.displayName},745:(e,t,s)=>{"use strict";s.d(t,{bq:()=>u,eb:()=>g,gC:()=>p,l6:()=>d,yv:()=>m});var a=s(5155),r=s(2115),i=s(1848),n=s(1719),o=s(1902),l=s(8867),c=s(9602);let d=i.bL;i.YJ;let m=i.WT,u=r.forwardRef((e,t)=>{let{className:s,children:r,...o}=e;return(0,a.jsxs)(i.l9,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...o,children:[r,(0,a.jsx)(i.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=i.l9.displayName;let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.PP,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})});h.displayName=i.PP.displayName;let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.wn,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})});x.displayName=i.wn.displayName;let p=r.forwardRef((e,t)=>{let{className:s,children:r,position:n="popper",...o}=e;return(0,a.jsx)(i.ZL,{children:(0,a.jsxs)(i.UC,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...o,children:[(0,a.jsx)(h,{}),(0,a.jsx)(i.LM,{className:(0,c.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(x,{})]})})});p.displayName=i.UC.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.JU,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=i.JU.displayName;let g=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(i.q7,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(i.VF,{children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})}),(0,a.jsx)(i.p4,{children:r})]})});g.displayName=i.q7.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=i.wv.displayName},2581:(e,t,s)=>{"use strict";s.d(t,{d:()=>o});var a=s(5155),r=s(2115),i=s(2413),n=s(9602);let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.bL,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...r,ref:t,children:(0,a.jsx)(i.zi,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});o.displayName=i.bL.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[606,565,984,811,99,167,786,441,517,358],()=>t(3667)),_N_E=e.O()}]);