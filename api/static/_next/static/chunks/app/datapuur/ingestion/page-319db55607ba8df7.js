(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[910],{1084:(e,a,s)=>{Promise.resolve().then(s.bind(s,3348))},3348:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>es});var t=s(5155),r=s(2115),n=s(4110),i=s(425),l=s(7803),o=s(1641),d=s(7163),c=s(1594),m=s(4081),u=s(767),h=s(8684),x=s(4085),p=s(6838),f=s(9602);let g=r.forwardRef((e,a)=>{let{className:s,value:r,...n}=e;return(0,t.jsx)(p.bL,{ref:a,className:(0,f.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...n,children:(0,t.jsx)(p.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});g.displayName=p.bL.displayName;var j=s(6421);let b=(0,j.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),v=r.forwardRef((e,a)=>{let{className:s,variant:r,...n}=e;return(0,t.jsx)("div",{ref:a,role:"alert",className:(0,f.cn)(b({variant:r}),s),...n})});v.displayName="Alert",r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("h5",{ref:a,className:(0,f.cn)("mb-1 font-medium leading-none tracking-tight",s),...r})}).displayName="AlertTitle";let N=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,f.cn)("text-sm [&_p]:leading-relaxed",s),...r})});N.displayName="AlertDescription";var y=s(602);function w(e){let{onSchemaDetected:a,isProcessing:s,setIsProcessing:n,chunkSize:i,onStatusChange:l,onJobCreated:o,onError:p}=e,[f,j]=(0,r.useState)(null),[b,w]=(0,r.useState)(!1),[S,k]=(0,r.useState)(0),[C,A]=(0,r.useState)(""),P=(0,r.useRef)(null),T=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?w(!0):"dragleave"===e.type&&w(!1)},I=e=>{let a=e.name.split(".").pop().toLowerCase();if("csv"!==a&&"json"!==a){A("Only CSV and JSON files are supported"),p&&p({message:"Only CSV and JSON files are supported"});return}if(e.size>0x3200000){A("File size exceeds 50MB limit"),p&&p({message:"File size exceeds 50MB limit"});return}j(e),A("")},F=async()=>{if(!f)return;n(!0),k(0),A(""),l("Preparing to upload file...");let e=new FormData;e.append("file",f),e.append("chunkSize",i.toString());try{let s=await fetch("".concat("http://localhost:8080/api","/datapuur/upload"),{method:"POST",body:e,headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!s.ok){let e=await s.json();throw Error(e.detail||"Failed to upload file")}let t=await s.json();l("File uploaded successfully! Processing data...");let r=await fetch("".concat("http://localhost:8080/api","/datapuur/ingest-file"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({file_id:t.file_id,file_name:f.name,chunk_size:i})});if(!r.ok){let e=await r.json();throw Error(e.detail||"Failed to start ingestion")}let n=await r.json(),d={id:n.job_id,name:f.name,type:"file",status:"running",progress:0,startTime:new Date().toISOString(),endTime:null,details:"File: ".concat(f.name," (").concat((f.size/1024/1024).toFixed(2)," MB)")};o&&o(d),l("Ingestion job started with ID: ".concat(n.job_id));let c=await fetch("".concat("http://localhost:8080/api","/datapuur/schema/").concat(t.file_id),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!c.ok){let e=await c.json();throw Error(e.detail||"Failed to detect schema")}let m=await c.json();a(m.schema),l("Schema detected successfully!")}catch(e){console.error("Error uploading file:",e),A(e.message||"Failed to upload file"),l(""),p&&p(e)}finally{n(!1)}};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-xl font-semibold text-foreground mb-4 flex items-center",children:[(0,t.jsx)(d.A,{className:"w-5 h-5 mr-2 text-primary"}),"Upload Data Files"]}),C&&(0,t.jsxs)(v,{variant:"destructive",className:"mb-4",children:[(0,t.jsx)(c.A,{className:"h-4 w-4"}),(0,t.jsx)(N,{children:C})]}),f?(0,t.jsxs)("div",{className:"border rounded-lg p-6 bg-card",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(m.A,{className:"h-8 w-8 text-primary mr-3"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-foreground",children:f.name}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(f.size/1024/1024).toFixed(2)," MB"]})]})]}),(0,t.jsx)(x.$,{variant:"ghost",size:"icon",onClick:()=>{j(null),k(0),A(""),l("")},disabled:s,className:"text-muted-foreground hover:text-foreground",children:(0,t.jsx)(u.A,{className:"h-5 w-5"})})]}),S>0&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)(g,{value:S,className:"h-2"}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1 text-right",children:[S,"% uploaded"]})]}),(0,t.jsx)(x.$,{className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",onClick:F,disabled:s,children:s?(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Upload File"]})})]}):(0,t.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors ".concat(b?"border-primary bg-primary/5":"border-border bg-background/50"),onDragEnter:T,onDragLeave:T,onDragOver:T,onDrop:e=>{e.preventDefault(),e.stopPropagation(),w(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&I(e.dataTransfer.files[0])},children:[(0,t.jsx)("input",{ref:P,type:"file",className:"hidden",onChange:e=>{e.preventDefault(),e.target.files&&e.target.files[0]&&I(e.target.files[0])},accept:".csv,.json"}),(0,t.jsx)(y.P.div,{whileHover:{scale:1.05},className:"inline-block",children:(0,t.jsx)(d.A,{className:"w-16 h-16 text-primary mx-auto mb-4"})}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"Drag and drop files here, or click to browse"}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[(0,t.jsx)(x.$,{className:"bg-primary hover:bg-primary/90 text-primary-foreground",onClick:()=>P.current.click(),children:"Select Files"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground mt-2 sm:mt-0 sm:ml-2 flex items-center",children:"Supported formats: CSV, JSON"})]})]}),(0,t.jsxs)("div",{className:"mt-4 p-4 bg-card/50 rounded-lg border border-border",children:[(0,t.jsx)("h4",{className:"font-medium text-foreground mb-2",children:"Instructions:"}),(0,t.jsxs)("ul",{className:"list-disc list-inside text-sm text-muted-foreground space-y-1",children:[(0,t.jsx)("li",{children:"Upload CSV or JSON files up to 50MB"}),(0,t.jsx)("li",{children:"CSV files should use comma as delimiter and include a header row"}),(0,t.jsx)("li",{children:"JSON files should contain an array of objects with consistent structure"}),(0,t.jsx)("li",{children:"The system will automatically detect the schema of your data"}),(0,t.jsx)("li",{children:"Adjust chunk size in the Processing Configuration section for large files"}),(0,t.jsx)("li",{children:"Monitor ingestion progress in the Ingestion Jobs section"})]})]})]})}var S=s(1476),k=s(9191),C=s(7780),A=s(9993),P=s(2336),T=s(5785),I=s(745);function F(e){let{onSchemaDetected:a,isProcessing:s,setIsProcessing:n,chunkSize:i,onStatusChange:l,onJobCreated:o,onError:d}=e,[m,u]=(0,r.useState)("mysql"),[h,p]=(0,r.useState)({host:"",port:"",database:"",username:"",password:"",table:""}),[f,g]=(0,r.useState)([]),[j,b]=(0,r.useState)(""),[y,w]=(0,r.useState)(""),F=e=>{let{name:a,value:s}=e.target;p({...h,[a]:s})},J=()=>h.host?h.port?h.database?h.username?h.table?"":"Table name is required":"Username is required":"Database name is required":"Port is required":"Host is required",E=async()=>{let e=J();if(e){b(e),d&&d({message:e});return}n(!0),b(""),l("Testing database connection...");try{let e=await fetch("".concat("http://localhost:8080/api","/datapuur/test-connection"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({type:m,config:h})});if(!e.ok){let a=await e.json();throw Error(a.detail||"Failed to connect to database")}l("Connection successful! Database is accessible.")}catch(e){console.error("Error testing connection:",e),b(e.message||"Failed to connect to database"),l(""),d&&d(e)}finally{n(!1)}},z=async()=>{let e=J();if(e){b(e),d&&d({message:e});return}n(!0),b(""),l("Connecting to database and fetching schema...");try{let e=await fetch("".concat("http://localhost:8080/api","/datapuur/db-schema"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({type:m,config:h,chunkSize:i})});if(!e.ok){let a=await e.json();throw Error(a.detail||"Failed to fetch schema")}let s=await e.json();a(s.schema),l("Schema fetched successfully!")}catch(e){console.error("Error fetching schema:",e),b(e.message||"Failed to fetch schema"),l(""),d&&d(e)}finally{n(!1)}},D=async()=>{let e=J();if(e){b(e),d&&d({message:e});return}n(!0),b(""),l("Starting database ingestion...");try{let e=await fetch("".concat("http://localhost:8080/api","/datapuur/ingest-db"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({type:m,config:h,chunk_size:i,connection_name:y||"".concat(m,"-").concat(h.database,"-").concat(h.table)})});if(!e.ok){let a=await e.json();throw Error(a.detail||"Failed to start ingestion")}let a=await e.json(),s={id:a.job_id,name:y||"".concat(m,"-").concat(h.database,"-").concat(h.table),type:"database",status:"running",progress:0,startTime:new Date().toISOString(),endTime:null,details:"DB: ".concat(h.database,".").concat(h.table),config:{type:m,database:h.database,table:h.table}};o&&o(s),l("Ingestion job started with ID: ".concat(a.job_id))}catch(e){console.error("Error starting ingestion:",e),b(e.message||"Failed to start ingestion"),l(""),d&&d(e)}finally{n(!1)}},O=e=>{u(e.type),p({...e.config,password:""})},L=e=>{g(f.filter(a=>a.id!==e))};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("h3",{className:"text-xl font-semibold text-foreground mb-4 flex items-center",children:[(0,t.jsx)(S.A,{className:"w-5 h-5 mr-2 text-primary"}),"Database Connection"]}),j&&(0,t.jsxs)(v,{variant:"destructive",className:"mb-4",children:[(0,t.jsx)(c.A,{className:"h-4 w-4"}),(0,t.jsx)(N,{children:j})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(T.J,{htmlFor:"connectionName",children:"Connection Name"}),(0,t.jsx)(P.p,{id:"connectionName",value:y,onChange:e=>w(e.target.value),placeholder:"e.g., Production MySQL"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(T.J,{htmlFor:"connectionType",children:"Database Type"}),(0,t.jsxs)(I.l6,{value:m,onValueChange:e=>{u(e);let a="";switch(e){case"mysql":a="3306";break;case"postgresql":a="5432";break;case"mssql":a="1433"}p({...h,port:a})},children:[(0,t.jsx)(I.bq,{id:"connectionType",children:(0,t.jsx)(I.yv,{placeholder:"Select database type"})}),(0,t.jsxs)(I.gC,{children:[(0,t.jsx)(I.eb,{value:"mysql",children:"MySQL"}),(0,t.jsx)(I.eb,{value:"postgresql",children:"PostgreSQL"}),(0,t.jsx)(I.eb,{value:"mssql",children:"SQL Server"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(T.J,{htmlFor:"host",children:"Host"}),(0,t.jsx)(P.p,{id:"host",name:"host",value:h.host,onChange:F,placeholder:"e.g., localhost or 192.168.1.1"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(T.J,{htmlFor:"port",children:"Port"}),(0,t.jsx)(P.p,{id:"port",name:"port",value:h.port,onChange:F,placeholder:"e.g., 3306 for MySQL"})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(T.J,{htmlFor:"database",children:"Database Name"}),(0,t.jsx)(P.p,{id:"database",name:"database",value:h.database,onChange:F,placeholder:"e.g., my_database"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(T.J,{htmlFor:"username",children:"Username"}),(0,t.jsx)(P.p,{id:"username",name:"username",value:h.username,onChange:F,placeholder:"e.g., root"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(T.J,{htmlFor:"password",children:"Password"}),(0,t.jsx)(P.p,{id:"password",name:"password",type:"password",value:h.password,onChange:F,placeholder:"Enter password"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(T.J,{htmlFor:"table",children:"Table Name"}),(0,t.jsx)(P.p,{id:"table",name:"table",value:h.table,onChange:F,placeholder:"e.g., customers"})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3 pt-4",children:[(0,t.jsx)(x.$,{variant:"outline",className:"border-primary text-primary hover:bg-primary/10",onClick:E,disabled:s,children:"Test Connection"}),(0,t.jsxs)(x.$,{variant:"outline",className:"border-secondary text-secondary hover:bg-secondary/10",onClick:z,disabled:s,children:[(0,t.jsx)(k.A,{className:"mr-2 h-4 w-4"}),"Fetch Schema"]}),(0,t.jsxs)(x.$,{className:"bg-primary hover:bg-primary/90 text-primary-foreground",onClick:D,disabled:s,children:[(0,t.jsx)(k.A,{className:"mr-2 h-4 w-4"}),"Start Ingestion"]})]}),(0,t.jsxs)("div",{className:"border-t border-border pt-4 mt-4",children:[(0,t.jsx)("h4",{className:"font-medium text-foreground mb-4",children:"Save Connection"}),(0,t.jsx)("div",{className:"flex space-x-2",children:(0,t.jsxs)(x.$,{variant:"outline",className:"border-primary text-primary hover:bg-primary/10",onClick:()=>{if(!y){b("Please provide a name for this connection");return}let e=J();if(e){b(e);return}g([...f,{id:Date.now().toString(),name:y,type:m,config:{...h,password:"********"}}]),w(""),l('Connection "'.concat(y,'" saved successfully!')),setTimeout(()=>l(""),3e3)},disabled:s,children:[(0,t.jsx)(C.A,{className:"mr-2 h-4 w-4"}),"Save"]})})]}),f.length>0&&(0,t.jsxs)("div",{className:"border-t border-border pt-4",children:[(0,t.jsx)("h4",{className:"font-medium text-foreground mb-4",children:"Saved Connections"}),(0,t.jsx)("div",{className:"space-y-2",children:f.map(e=>(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 border border-border rounded-md bg-card/50 hover:bg-card",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.name}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.type," • ",e.config.host,":",e.config.port," • ",e.config.database]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(x.$,{variant:"ghost",size:"sm",onClick:()=>O(e),className:"h-8 px-2 text-primary",children:"Load"}),(0,t.jsx)(x.$,{variant:"ghost",size:"sm",onClick:()=>L(e.id),className:"h-8 px-2 text-destructive",children:(0,t.jsx)(A.A,{className:"h-4 w-4"})})]})]},e.id))})]}),(0,t.jsxs)("div",{className:"mt-4 p-4 bg-card/50 rounded-lg border border-border",children:[(0,t.jsx)("h4",{className:"font-medium text-foreground mb-2",children:"Instructions:"}),(0,t.jsxs)("ul",{className:"list-disc list-inside text-sm text-muted-foreground space-y-1",children:[(0,t.jsx)("li",{children:"Configure database connection details to ingest data from SQL databases"}),(0,t.jsx)("li",{children:"Supported databases: MySQL, PostgreSQL, and SQL Server"}),(0,t.jsx)("li",{children:"Test your connection before starting ingestion"}),(0,t.jsx)("li",{children:"Fetch schema to preview the table structure"}),(0,t.jsx)("li",{children:"Save connections for future use"}),(0,t.jsx)("li",{children:"Monitor ingestion progress in the Ingestion Jobs section"})]})]})]})}var J=s(3997),E=s(3473);let z=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("textarea",{className:(0,f.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...r})});z.displayName="Textarea";var D=s(2581);function O(e){let{onSchemaDetected:a,isProcessing:s,setIsProcessing:n,chunkSize:i,onStatusChange:l,onJobCreated:d,onError:m}=e,[h,p]=(0,r.useState)({name:"",url:"",method:"GET",headers:{},body:"",authType:"none",username:"",password:"",token:"",pollingInterval:0,dataPath:"",transformationScript:""}),[f,g]=(0,r.useState)(""),[j,b]=(0,r.useState)(""),[y,w]=(0,r.useState)([]),[S,F]=(0,r.useState)(""),[O,L]=(0,r.useState)("basic"),[U,B]=(0,r.useState)(!1),[R,q]=(0,r.useState)(null),[$,_]=(0,r.useState)(!1),V=e=>{let{name:a,value:s}=e.target;p({...h,[a]:s})},M=(e,a)=>{p({...h,[e]:a})},H=e=>{let a={...h.headers};delete a[e],p({...h,headers:a})},Q=()=>h.name?h.url?"basic"!==h.authType||h.username&&h.password?"token"!==h.authType||h.token?"":"Token is required for Token Authentication":"Username and password are required for Basic Authentication":"API URL is required":"Configuration name is required",X=async()=>{let e=Q();if(e){F(e);return}n(!0),F(""),l("Testing API connection...");try{let e=await fetch("".concat("http://localhost:8080/api","/datapuur/test-api"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({config:h})});if(!e.ok){let a=await e.json();throw Error(a.detail||"Failed to connect to API")}let a=await e.json();q(a.response),_(!0),l("Connection successful! API is accessible.")}catch(e){console.error("Error testing API connection:",e),F(e.message||"Failed to connect to API"),l(""),m&&m(e)}finally{n(!1)}},G=async()=>{let e=Q();if(e){F(e);return}n(!0),F(""),l("Connecting to API and fetching schema...");try{let e=await fetch("".concat("http://localhost:8080/api","/datapuur/api-schema"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({config:h,chunkSize:i})});if(!e.ok){let a=await e.json();throw Error(a.detail||"Failed to fetch schema")}let s=await e.json();a(s.schema),l("Schema fetched successfully!")}catch(e){console.error("Error fetching schema:",e),F(e.message||"Failed to fetch schema"),l(""),m&&m(e)}finally{n(!1)}},W=async()=>{let e=Q();if(e){F(e);return}n(!0),F(""),l("Starting API data ingestion...");try{let e=await fetch("".concat("http://localhost:8080/api","/datapuur/ingest-api"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({config:h,chunkSize:i,enablePolling:U})});if(!e.ok){let a=await e.json();throw Error(a.detail||"Failed to start ingestion")}let a=await e.json(),s={id:a.job_id,name:h.name,type:"api",status:"running",progress:0,startTime:new Date().toISOString(),endTime:null,details:"API: ".concat(h.url),config:h};d&&d(s),l("Ingestion job started with ID: ".concat(a.job_id))}catch(e){console.error("Error starting ingestion:",e),F(e.message||"Failed to start ingestion"),l(""),m&&m(e)}finally{n(!1)}},Y=e=>{let a={...e};"********"===a.password&&(a.password=""),"********"===a.token&&(a.token=""),p(a)},Z=e=>{w(y.filter(a=>a.id!==e))};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("h3",{className:"text-xl font-semibold text-foreground mb-4 flex items-center",children:[(0,t.jsx)(J.A,{className:"w-5 h-5 mr-2 text-primary"}),"API Data Ingestion"]}),S&&(0,t.jsxs)(v,{variant:"destructive",className:"mb-4",children:[(0,t.jsx)(c.A,{className:"h-4 w-4"}),(0,t.jsx)(N,{children:S})]}),(0,t.jsxs)(o.tU,{value:O,onValueChange:L,className:"w-full",children:[(0,t.jsxs)(o.j7,{className:"grid grid-cols-3 mb-4",children:[(0,t.jsx)(o.Xi,{value:"basic",children:"Basic Settings"}),(0,t.jsx)(o.Xi,{value:"auth",children:"Authentication"}),(0,t.jsx)(o.Xi,{value:"advanced",children:"Advanced"})]}),(0,t.jsxs)(o.av,{value:"basic",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(T.J,{htmlFor:"name",children:"Configuration Name"}),(0,t.jsx)(P.p,{id:"name",name:"name",value:h.name,onChange:V,placeholder:"e.g., Customer API"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(T.J,{htmlFor:"url",children:"API URL"}),(0,t.jsx)(P.p,{id:"url",name:"url",value:h.url,onChange:V,placeholder:"e.g., https://api.example.com/data"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(T.J,{htmlFor:"method",children:"HTTP Method"}),(0,t.jsxs)(I.l6,{value:h.method,onValueChange:e=>M("method",e),children:[(0,t.jsx)(I.bq,{id:"method",children:(0,t.jsx)(I.yv,{placeholder:"Select HTTP method"})}),(0,t.jsxs)(I.gC,{children:[(0,t.jsx)(I.eb,{value:"GET",children:"GET"}),(0,t.jsx)(I.eb,{value:"POST",children:"POST"}),(0,t.jsx)(I.eb,{value:"PUT",children:"PUT"}),(0,t.jsx)(I.eb,{value:"DELETE",children:"DELETE"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(T.J,{htmlFor:"dataPath",children:"Data Path (JSONPath)"}),(0,t.jsx)(P.p,{id:"dataPath",name:"dataPath",value:h.dataPath,onChange:V,placeholder:"e.g., $.data.items or leave empty for root"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Specify the path to the data array in the response (e.g., $.data.items)"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(T.J,{children:"HTTP Headers"}),(0,t.jsxs)("div",{className:"flex space-x-2 mb-2",children:[(0,t.jsx)(P.p,{placeholder:"Header name",value:f,onChange:e=>g(e.target.value)}),(0,t.jsx)(P.p,{placeholder:"Header value",value:j,onChange:e=>b(e.target.value)}),(0,t.jsx)(x.$,{variant:"outline",className:"border-primary text-primary hover:bg-primary/10",onClick:()=>{if(!f.trim()){F("Header key cannot be empty");return}p({...h,headers:{...h.headers,[f]:j}}),g(""),b("")},children:(0,t.jsx)(E.A,{className:"h-4 w-4"})})]}),Object.keys(h.headers).length>0&&(0,t.jsx)("div",{className:"space-y-2 border border-border rounded-md p-3",children:Object.entries(h.headers).map(e=>{let[a,s]=e;return(0,t.jsxs)("div",{className:"flex justify-between items-center bg-muted/50 p-2 rounded-md",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:"font-medium",children:[a,":"]})," ",s]}),(0,t.jsx)(x.$,{variant:"ghost",size:"sm",onClick:()=>H(a),className:"h-6 w-6 p-0 text-muted-foreground hover:text-destructive",children:(0,t.jsx)(u.A,{className:"h-4 w-4"})})]},a)})})]}),"GET"!==h.method&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(T.J,{htmlFor:"body",children:"Request Body (JSON)"}),(0,t.jsx)(z,{id:"body",name:"body",value:h.body,onChange:V,placeholder:'e.g., {"query": "select * from customers"}',rows:5,className:"font-mono text-sm"})]})]}),(0,t.jsxs)(o.av,{value:"auth",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(T.J,{htmlFor:"authType",children:"Authentication Type"}),(0,t.jsxs)(I.l6,{value:h.authType,onValueChange:e=>M("authType",e),children:[(0,t.jsx)(I.bq,{id:"authType",children:(0,t.jsx)(I.yv,{placeholder:"Select authentication type"})}),(0,t.jsxs)(I.gC,{children:[(0,t.jsx)(I.eb,{value:"none",children:"None"}),(0,t.jsx)(I.eb,{value:"basic",children:"Basic Auth"}),(0,t.jsx)(I.eb,{value:"token",children:"Bearer Token"})]})]})]}),"basic"===h.authType&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(T.J,{htmlFor:"username",children:"Username"}),(0,t.jsx)(P.p,{id:"username",name:"username",value:h.username,onChange:V,placeholder:"Enter username"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(T.J,{htmlFor:"password",children:"Password"}),(0,t.jsx)(P.p,{id:"password",name:"password",type:"password",value:h.password,onChange:V,placeholder:"Enter password"})]})]}),"token"===h.authType&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(T.J,{htmlFor:"token",children:"Bearer Token"}),(0,t.jsx)(P.p,{id:"token",name:"token",value:h.token,onChange:V,placeholder:"Enter token"})]})]}),(0,t.jsxs)(o.av,{value:"advanced",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(D.d,{id:"enablePolling",checked:U,onCheckedChange:B}),(0,t.jsx)(T.J,{htmlFor:"enablePolling",children:"Enable Polling"})]}),U&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(T.J,{htmlFor:"pollingInterval",children:"Polling Interval (seconds)"}),(0,t.jsx)(P.p,{id:"pollingInterval",name:"pollingInterval",type:"number",min:"5",value:h.pollingInterval,onChange:V,placeholder:"e.g., 60"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(T.J,{htmlFor:"transformationScript",children:"Transformation Script (JavaScript)"}),(0,t.jsx)(z,{id:"transformationScript",name:"transformationScript",value:h.transformationScript,onChange:V,placeholder:"// Optional: Transform the API response before ingestion   // Example:   // function transform(data) {   //   return data.map(item => ({   //     id: item.id,   //     name: item.full_name,   //     created: new Date(item.created_at).toISOString()   //   }));   // }",rows:8,className:"font-mono text-sm"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Optional: Write JavaScript code to transform the API response before ingestion"})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3 pt-4",children:[(0,t.jsx)(x.$,{variant:"outline",className:"border-primary text-primary hover:bg-primary/10",onClick:X,disabled:s,children:"Test Connection"}),(0,t.jsxs)(x.$,{variant:"outline",className:"border-secondary text-secondary hover:bg-secondary/10",onClick:G,disabled:s,children:[(0,t.jsx)(k.A,{className:"mr-2 h-4 w-4"}),"Fetch Schema"]}),(0,t.jsxs)(x.$,{className:"bg-primary hover:bg-primary/90 text-primary-foreground",onClick:W,disabled:s,children:[(0,t.jsx)(k.A,{className:"mr-2 h-4 w-4"}),"Start Ingestion"]})]}),$&&R&&(0,t.jsxs)("div",{className:"border-t border-border pt-4 mt-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsx)("h4",{className:"font-medium text-foreground",children:"API Test Response"}),(0,t.jsx)(x.$,{variant:"ghost",size:"sm",onClick:()=>_(!1),className:"h-6 w-6 p-0",children:(0,t.jsx)(u.A,{className:"h-4 w-4"})})]}),(0,t.jsx)("div",{className:"bg-muted rounded-md p-3 overflow-auto max-h-60",children:(0,t.jsx)("pre",{className:"text-xs font-mono whitespace-pre-wrap",children:JSON.stringify(R,null,2)})})]}),(0,t.jsxs)("div",{className:"border-t border-border pt-4 mt-4",children:[(0,t.jsx)("h4",{className:"font-medium text-foreground mb-4",children:"Save Configuration"}),(0,t.jsx)("div",{className:"flex space-x-2",children:(0,t.jsxs)(x.$,{variant:"outline",className:"border-primary text-primary hover:bg-primary/10",onClick:()=>{if(!h.name){F("Please provide a name for this configuration");return}let e=Q();if(e){F(e);return}w([...y,{id:Date.now().toString(),...h,password:h.password?"********":"",token:h.token?"********":""}]),l('Configuration "'.concat(h.name,'" saved successfully!')),setTimeout(()=>l(""),3e3)},disabled:s,children:[(0,t.jsx)(C.A,{className:"mr-2 h-4 w-4"}),"Save Configuration"]})})]}),y.length>0&&(0,t.jsxs)("div",{className:"border-t border-border pt-4",children:[(0,t.jsx)("h4",{className:"font-medium text-foreground mb-4",children:"Saved Configurations"}),(0,t.jsx)("div",{className:"space-y-2",children:y.map(e=>(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 border border-border rounded-md bg-card/50 hover:bg-card",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.name}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.method," • ",e.url]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(x.$,{variant:"ghost",size:"sm",onClick:()=>Y(e),className:"h-8 px-2 text-primary",children:"Load"}),(0,t.jsx)(x.$,{variant:"ghost",size:"sm",onClick:()=>Z(e.id),className:"h-8 px-2 text-destructive",children:(0,t.jsx)(A.A,{className:"h-4 w-4"})})]})]},e.id))})]}),(0,t.jsxs)("div",{className:"mt-4 p-4 bg-card/50 rounded-lg border border-border",children:[(0,t.jsx)("h4",{className:"font-medium text-foreground mb-2",children:"API Documentation:"}),(0,t.jsxs)("ul",{className:"list-disc list-inside text-sm text-muted-foreground space-y-1",children:[(0,t.jsx)("li",{children:"Configure API endpoints to ingest data from external services"}),(0,t.jsx)("li",{children:"Support for GET, POST, PUT, and DELETE HTTP methods"}),(0,t.jsx)("li",{children:"Authentication options: None, Basic Auth, and Bearer Token"}),(0,t.jsx)("li",{children:"Set up polling for continuous data ingestion"}),(0,t.jsx)("li",{children:"Transform data with custom JavaScript before ingestion"}),(0,t.jsx)("li",{children:"JSONPath support for extracting nested data from responses"})]})]})]})}var L=s(4857),U=s(1719),B=s(6967);let R=(0,j.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function q(e){let{className:a,variant:s,...r}=e;return(0,t.jsx)("div",{className:(0,f.cn)(R({variant:s}),a),...r})}function $(e){let{schema:a}=e,[s,n]=(0,r.useState)({});if(!a||!a.fields)return(0,t.jsx)("div",{className:"text-center p-4 text-muted-foreground",children:"No schema detected yet. Upload a file or connect to a database to view the schema."});let i=e=>{n({...s,[e]:!s[e]})},l=e=>{switch(e.toLowerCase()){case"string":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"number":case"integer":case"float":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"boolean":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300";case"date":case"datetime":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"object":return"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300";case"array":return"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-foreground",children:a.name||"Data Schema"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a.fields.length," fields detected"]})]}),(0,t.jsxs)(x.$,{variant:"outline",size:"sm",onClick:()=>{let e=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="schema.json",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(s)},className:"text-primary border-primary hover:bg-primary/10",children:[(0,t.jsx)(L.A,{className:"h-4 w-4 mr-2"}),"Download Schema"]})]}),(0,t.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-4 p-3 bg-muted text-muted-foreground font-medium text-sm",children:[(0,t.jsx)("div",{className:"col-span-4",children:"Field Name"}),(0,t.jsx)("div",{className:"col-span-2",children:"Type"}),(0,t.jsx)("div",{className:"col-span-2",children:"Format"}),(0,t.jsx)("div",{className:"col-span-2",children:"Nullable"}),(0,t.jsx)("div",{className:"col-span-2",children:"Sample"})]}),(0,t.jsx)("div",{className:"divide-y divide-border",children:a.fields.map((e,a)=>(0,t.jsxs)(y.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*a},className:"grid grid-cols-12 gap-4 p-3 hover:bg-muted/50 cursor-pointer",onClick:()=>i(e.name),children:[(0,t.jsxs)("div",{className:"col-span-4 font-medium text-foreground flex items-center",children:[e.children&&e.children.length>0?s[e.name]?(0,t.jsx)(U.A,{className:"h-4 w-4 mr-1 text-muted-foreground"}):(0,t.jsx)(B.A,{className:"h-4 w-4 mr-1 text-muted-foreground"}):(0,t.jsx)("span",{className:"w-5"}),e.name]}),(0,t.jsx)("div",{className:"col-span-2",children:(0,t.jsx)(q,{className:"font-normal ".concat(l(e.type)),children:e.type})}),(0,t.jsx)("div",{className:"col-span-2 text-muted-foreground",children:e.format||"-"}),(0,t.jsx)("div",{className:"col-span-2 text-muted-foreground",children:e.nullable?"Yes":"No"}),(0,t.jsx)("div",{className:"col-span-2 text-muted-foreground truncate",children:void 0!==e.sample&&null!==e.sample?String(e.sample).substring(0,20)+(String(e.sample).length>20?"...":""):"-"}),s[e.name]&&e.children&&e.children.length>0&&(0,t.jsx)("div",{className:"col-span-12 pl-6 border-l-2 border-muted ml-2 mt-2",children:(0,t.jsx)("div",{className:"space-y-2",children:e.children.map((a,s)=>(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-4 p-2 bg-muted/30 rounded-md",children:[(0,t.jsx)("div",{className:"col-span-4 font-medium text-foreground",children:a.name}),(0,t.jsx)("div",{className:"col-span-2",children:(0,t.jsx)(q,{className:"font-normal ".concat(l(a.type)),children:a.type})}),(0,t.jsx)("div",{className:"col-span-2 text-muted-foreground",children:a.format||"-"}),(0,t.jsx)("div",{className:"col-span-2 text-muted-foreground",children:a.nullable?"Yes":"No"}),(0,t.jsx)("div",{className:"col-span-2 text-muted-foreground truncate",children:void 0!==a.sample&&null!==a.sample?String(a.sample).substring(0,20)+(String(a.sample).length>20?"...":""):"-"})]},"".concat(e.name,"-").concat(a.name)))})})]},e.name))})]})]})}var _=s(5900);let V=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsxs)(_.bL,{ref:a,className:(0,f.cn)("relative flex w-full touch-none select-none items-center",s),...r,children:[(0,t.jsx)(_.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,t.jsx)(_.Q6,{className:"absolute h-full bg-primary"})}),(0,t.jsx)(_.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});V.displayName=_.bL.displayName;var M=s(8617);function H(e){let{chunkSize:a,onChunkSizeChange:s,disabled:n=!1}=e,[i,l]=(0,r.useState)(a);return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(T.J,{htmlFor:"chunkSize",className:"text-foreground mb-1 block",children:"Chunk Size (records per batch)"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground mb-4",children:"Adjust the number of records processed at once for optimal performance"})]}),(0,t.jsx)("div",{className:"w-24",children:(0,t.jsx)(P.p,{id:"chunkSize",type:"number",min:100,max:1e4,step:100,value:i,onChange:e=>{let a=Number.parseInt(e.target.value);!isNaN(a)&&a>=100&&a<=1e4&&(l(a),s(a))},disabled:n,className:"text-right"})})]}),(0,t.jsx)(V,{value:[i],min:100,max:1e4,step:100,onValueChange:e=>{let a=e[0];l(a),s(a)},disabled:n,className:"py-4"}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,t.jsx)("span",{children:"100"}),(0,t.jsx)("span",{children:"1000"}),(0,t.jsx)("span",{children:"5000"}),(0,t.jsx)("span",{children:"10000"})]}),(0,t.jsx)("div",{className:"mt-4 p-3 bg-muted/50 rounded-md border border-border",children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)(M.A,{className:"h-5 w-5 text-primary mr-2 mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,t.jsx)("p",{className:"font-medium text-foreground mb-1",children:"Performance Considerations:"}),(0,t.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-1",children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Smaller chunks"})," (100-500): Use for complex data or limited memory"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Medium chunks"})," (500-2000): Balanced performance for most datasets"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Larger chunks"})," (2000+): Faster for simple data with ample resources"]})]})]})]})})]})}var Q=s(1773),X=s(6889),G=s(3239),W=s(5340),Y=s(812);function Z(e){let{jobs:a,onJobUpdated:s,errors:n}=e,[i,l]=(0,r.useState)("active"),[d,u]=(0,r.useState)(!0),h=a.filter(e=>"running"===e.status||"queued"===e.status),p=a.filter(e=>"completed"===e.status),f=a.filter(e=>"failed"===e.status);(0,r.useEffect)(()=>{if(!d)return;let e=setInterval(async()=>{let e=a.filter(e=>"running"===e.status||"queued"===e.status);if(0!==e.length)try{for(let a of e){let e=await fetch("".concat("http://localhost:8080/api","/datapuur/job-status/").concat(a.id),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){let a=await e.json();s&&s(a)}}}catch(e){console.error("Error polling job status:",e)}},3e3);return()=>clearInterval(e)},[a,d,s]);let j=e=>{switch(e){case"file":default:return(0,t.jsx)(m.A,{className:"h-4 w-4"});case"database":return(0,t.jsx)(S.A,{className:"h-4 w-4"});case"api":return(0,t.jsx)(J.A,{className:"h-4 w-4"})}},b=e=>{switch(e){case"running":return(0,t.jsxs)(q,{className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300 flex items-center gap-1",children:[(0,t.jsx)(Q.A,{className:"h-3 w-3 animate-spin"}),"Running"]});case"queued":return(0,t.jsxs)(q,{className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300 flex items-center gap-1",children:[(0,t.jsx)(X.A,{className:"h-3 w-3"}),"Queued"]});case"completed":return(0,t.jsxs)(q,{className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300 flex items-center gap-1",children:[(0,t.jsx)(G.A,{className:"h-3 w-3"}),"Completed"]});case"failed":return(0,t.jsxs)(q,{className:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300 flex items-center gap-1",children:[(0,t.jsx)(W.A,{className:"h-3 w-3"}),"Failed"]});default:return(0,t.jsx)(q,{className:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:e})}},v=e=>{if(!e)return"N/A";try{return(0,Y.m)(new Date(e),{addSuffix:!0})}catch(a){return e}},N=async e=>{try{let a=await fetch("".concat("http://localhost:8080/api","/datapuur/cancel-job/").concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(a.ok){let e=await a.json();s&&s(e)}}catch(e){console.error("Error canceling job:",e)}};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("div",{className:"flex items-center space-x-2",children:(0,t.jsxs)(x.$,{variant:"outline",size:"sm",onClick:()=>u(!d),className:d?"border-primary text-primary":"",children:[(0,t.jsx)(Q.A,{className:"h-4 w-4 mr-2 ".concat(d?"animate-spin":"")}),d?"Auto-refreshing":"Auto-refresh paused"]})}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[h.length," active, ",p.length," completed, ",f.length," failed"]})]}),(0,t.jsxs)(o.tU,{defaultValue:"active",value:i,onValueChange:l,children:[(0,t.jsxs)(o.j7,{className:"grid grid-cols-3",children:[(0,t.jsxs)(o.Xi,{value:"active",children:["Active Jobs ",h.length>0&&"(".concat(h.length,")")]}),(0,t.jsxs)(o.Xi,{value:"completed",children:["Completed ",p.length>0&&"(".concat(p.length,")")]}),(0,t.jsxs)(o.Xi,{value:"failed",children:["Failed ",f.length>0&&"(".concat(f.length,")")]})]}),(0,t.jsx)(o.av,{value:"active",className:"space-y-4 mt-4",children:0===h.length?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No active jobs"}):h.map(e=>(0,t.jsxs)("div",{className:"border border-border rounded-lg p-4 bg-card/50",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"mr-2",children:j(e.type)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-foreground",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.details})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[b(e.status),(0,t.jsx)(x.$,{variant:"ghost",size:"sm",onClick:()=>N(e.id),className:"h-7 px-2 text-destructive hover:bg-destructive/10",children:"Cancel"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{children:["Progress: ",e.progress,"%"]}),(0,t.jsxs)("span",{children:["Started ",v(e.startTime)]})]}),(0,t.jsx)(g,{value:e.progress,className:"h-2"})]})]},e.id))}),(0,t.jsx)(o.av,{value:"completed",className:"space-y-4 mt-4",children:0===p.length?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No completed jobs"}):p.map(e=>(0,t.jsxs)("div",{className:"border border-border rounded-lg p-4 bg-card/50",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"mr-2",children:j(e.type)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-foreground",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.details})]})]}),(0,t.jsx)("div",{className:"flex items-center space-x-2",children:b(e.status)})]}),(0,t.jsxs)("div",{className:"mt-2 text-xs text-muted-foreground flex justify-between",children:[(0,t.jsxs)("span",{children:["Completed ",v(e.endTime)]}),(0,t.jsxs)("span",{children:["Duration: ",e.duration||"N/A"]})]})]},e.id))}),(0,t.jsx)(o.av,{value:"failed",className:"space-y-4 mt-4",children:0===f.length?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No failed jobs"}):f.map(e=>(0,t.jsxs)("div",{className:"border border-border rounded-lg p-4 bg-card/50",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"mr-2",children:j(e.type)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-foreground",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.details})]})]}),(0,t.jsx)("div",{className:"flex items-center space-x-2",children:b(e.status)})]}),(0,t.jsxs)("div",{className:"mt-2 text-xs text-destructive",children:["Error: ",e.error||"Unknown error occurred"]}),(0,t.jsxs)("div",{className:"mt-1 text-xs text-muted-foreground",children:["Failed ",v(e.endTime)]})]},e.id))})]}),n.length>0&&(0,t.jsxs)("div",{className:"mt-6 border-t border-border pt-4",children:[(0,t.jsxs)("h4",{className:"font-medium text-foreground mb-2 flex items-center",children:[(0,t.jsx)(c.A,{className:"h-4 w-4 mr-2 text-destructive"}),"Error Log"]}),(0,t.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:n.map(e=>(0,t.jsx)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-md p-2 text-sm",children:(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-destructive font-medium",children:e.message}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:v(e.timestamp)})]})},e.id))})]})]})}var K=s(6745),ee=s(8236),ea=s(6099);function es(){let[e,a]=(0,r.useState)("file-upload"),[s,c]=(0,r.useState)(null),[m,u]=(0,r.useState)(!1),[h,x]=(0,r.useState)(""),[p,f]=(0,r.useState)(1e3),[g,j]=(0,r.useState)([]),[b,v]=(0,r.useState)([]),N={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},k=e=>{c(e)},C=e=>{x(e)},A=e=>{j(a=>[e,...a])},P=e=>{v(a=>[{id:Date.now(),message:e.message||"An unknown error occurred",timestamp:new Date().toISOString()},...a])};return(0,t.jsxs)("main",{className:"min-h-screen bg-background antialiased relative overflow-hidden",children:[(0,t.jsx)("div",{className:"h-full w-full absolute inset-0 z-0",children:(0,t.jsx)(i.n,{id:"tsparticlesfullpage",background:"transparent",minSize:.6,maxSize:1.4,particleDensity:100,className:"w-full h-full",particleColor:"var(--foreground)"})}),(0,t.jsxs)("div",{className:"relative z-10",children:[(0,t.jsx)(n.A,{}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(l.A,{}),(0,t.jsx)("div",{className:"flex-1 p-8",children:(0,t.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,t.jsx)(y.P.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-4xl font-bold text-foreground mb-6",children:"Data Ingestion"}),(0,t.jsx)(y.P.p,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"text-muted-foreground text-xl mb-8",children:"Import and collect data from various sources for analysis and transformation."}),(0,t.jsxs)(y.P.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",className:"space-y-8",children:[(0,t.jsxs)(o.tU,{defaultValue:"file-upload",onValueChange:a,className:"w-full",children:[(0,t.jsxs)(o.j7,{className:"grid grid-cols-3 mb-8",children:[(0,t.jsxs)(o.Xi,{value:"file-upload",className:"flex items-center gap-2",children:[(0,t.jsx)(d.A,{className:"h-4 w-4"}),"File Upload"]}),(0,t.jsxs)(o.Xi,{value:"database",className:"flex items-center gap-2",children:[(0,t.jsx)(S.A,{className:"h-4 w-4"}),"Database Connection"]}),(0,t.jsxs)(o.Xi,{value:"api",className:"flex items-center gap-2",children:[(0,t.jsx)(J.A,{className:"h-4 w-4"}),"API Ingestion"]})]}),(0,t.jsx)(o.av,{value:"file-upload",className:"space-y-6",children:(0,t.jsx)(y.P.div,{variants:N,className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border shadow-md",children:(0,t.jsx)(w,{onSchemaDetected:k,isProcessing:m,setIsProcessing:u,chunkSize:p,onStatusChange:C,onJobCreated:A,onError:P})})}),(0,t.jsx)(o.av,{value:"database",className:"space-y-6",children:(0,t.jsx)(y.P.div,{variants:N,className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border shadow-md",children:(0,t.jsx)(F,{onSchemaDetected:k,isProcessing:m,setIsProcessing:u,chunkSize:p,onStatusChange:C,onJobCreated:A,onError:P})})}),(0,t.jsx)(o.av,{value:"api",className:"space-y-6",children:(0,t.jsx)(y.P.div,{variants:N,className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border shadow-md",children:(0,t.jsx)(O,{onSchemaDetected:k,isProcessing:m,setIsProcessing:u,chunkSize:p,onStatusChange:C,onJobCreated:A,onError:P})})})]}),h&&(0,t.jsx)(y.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-primary/10 border border-primary rounded-lg p-4 text-primary",children:h}),g.length>0&&(0,t.jsxs)(y.P.div,{variants:N,className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border shadow-md",children:[(0,t.jsxs)("h3",{className:"text-xl font-semibold text-foreground mb-4 flex items-center",children:[(0,t.jsx)(K.A,{className:"w-5 h-5 mr-2 text-primary"}),"Ingestion Jobs"]}),(0,t.jsx)(Z,{jobs:g,onJobUpdated:e=>{j(a=>a.map(a=>a.id===e.id?e:a))},errors:b})]}),(0,t.jsxs)(y.P.div,{variants:N,className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border shadow-md",children:[(0,t.jsxs)("h3",{className:"text-xl font-semibold text-foreground mb-4 flex items-center",children:[(0,t.jsx)(ee.A,{className:"w-5 h-5 mr-2 text-primary"}),"Processing Configuration"]}),(0,t.jsx)(H,{chunkSize:p,onChunkSizeChange:e=>{f(e)},disabled:m})]}),s&&(0,t.jsxs)(y.P.div,{variants:N,className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border shadow-md",children:[(0,t.jsxs)("h3",{className:"text-xl font-semibold text-foreground mb-4 flex items-center",children:[(0,t.jsx)(ea.A,{className:"w-5 h-5 mr-2 text-primary"}),"Detected Schema"]}),(0,t.jsx)($,{schema:s})]})]})]})})]})]})]})}},7803:(e,a,s)=>{"use strict";s.d(a,{A:()=>h});var t=s(5155),r=s(8173),n=s.n(r),i=s(6046),l=s(8477),o=s(3894),d=s(6889),c=s(4857),m=s(9602),u=s(602);function h(){let e=(0,i.usePathname)(),a=[{name:"Data Dashboard",href:"/datapuur/dashboard",icon:l.A},{name:"Ingestion",href:"/datapuur/ingestion",icon:o.A},{name:"Transformation",href:"/datapuur/transformation",icon:d.A},{name:"Export",href:"/datapuur/export",icon:c.A}];return(0,t.jsxs)("div",{className:"w-64 h-[calc(100vh-76px)] border-r border-border p-4 bg-card/50",children:[(0,t.jsx)(u.P.h2,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"text-foreground font-medium text-lg mb-4 px-4",children:"DataPuur Menu"}),(0,t.jsx)("nav",{className:"space-y-2",children:a.map((a,s)=>{let r=e===a.href||"/datapuur"===e&&0===s;return(0,t.jsx)(u.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1*s},children:(0,t.jsxs)(n(),{href:a.href,className:(0,m.cn)("flex items-center space-x-3 px-4 py-2 rounded-lg transition-all duration-200 group",r?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-accent"),children:[(0,t.jsx)(a.icon,{className:(0,m.cn)("w-5 h-5 transition-transform",r?"scale-110":"group-hover:scale-110")}),(0,t.jsx)("span",{children:a.name}),r&&(0,t.jsx)(u.P.div,{layoutId:"sidebar-indicator",className:"absolute left-0 w-1 h-8 bg-primary rounded-r-full",initial:{opacity:0},animate:{opacity:1},transition:{duration:.2}})]})},a.href)})})]})}},2336:(e,a,s)=>{"use strict";s.d(a,{p:()=>i});var t=s(5155),r=s(2115),n=s(9602);let i=r.forwardRef((e,a)=>{let{className:s,type:r,...i}=e;return(0,t.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...i})});i.displayName="Input"},5785:(e,a,s)=>{"use strict";s.d(a,{J:()=>d});var t=s(5155),r=s(2115),n=s(6195),i=s(6421),l=s(9602);let o=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(n.b,{ref:a,className:(0,l.cn)(o(),s),...r})});d.displayName=n.b.displayName},745:(e,a,s)=>{"use strict";s.d(a,{bq:()=>u,eb:()=>f,gC:()=>p,l6:()=>c,yv:()=>m});var t=s(5155),r=s(2115),n=s(1848),i=s(1719),l=s(1902),o=s(8867),d=s(9602);let c=n.bL;n.YJ;let m=n.WT,u=r.forwardRef((e,a)=>{let{className:s,children:r,...l}=e;return(0,t.jsxs)(n.l9,{ref:a,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...l,children:[r,(0,t.jsx)(n.In,{asChild:!0,children:(0,t.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=n.l9.displayName;let h=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(n.PP,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,t.jsx)(l.A,{className:"h-4 w-4"})})});h.displayName=n.PP.displayName;let x=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(n.wn,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})});x.displayName=n.wn.displayName;let p=r.forwardRef((e,a)=>{let{className:s,children:r,position:i="popper",...l}=e;return(0,t.jsx)(n.ZL,{children:(0,t.jsxs)(n.UC,{ref:a,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...l,children:[(0,t.jsx)(h,{}),(0,t.jsx)(n.LM,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,t.jsx)(x,{})]})})});p.displayName=n.UC.displayName,r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(n.JU,{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=n.JU.displayName;let f=r.forwardRef((e,a)=>{let{className:s,children:r,...i}=e;return(0,t.jsxs)(n.q7,{ref:a,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(n.VF,{children:(0,t.jsx)(o.A,{className:"h-4 w-4"})})}),(0,t.jsx)(n.p4,{children:r})]})});f.displayName=n.q7.displayName,r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(n.wv,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=n.wv.displayName},2581:(e,a,s)=>{"use strict";s.d(a,{d:()=>l});var t=s(5155),r=s(2115),n=s(2413),i=s(9602);let l=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(n.bL,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...r,ref:a,children:(0,t.jsx)(n.zi,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});l.displayName=n.bL.displayName},1641:(e,a,s)=>{"use strict";s.d(a,{Xi:()=>d,av:()=>c,j7:()=>o,tU:()=>l});var t=s(5155),r=s(2115),n=s(8217),i=s(9602);let l=n.bL,o=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(n.B8,{ref:a,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...r})});o.displayName=n.B8.displayName;let d=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(n.l9,{ref:a,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...r})});d.displayName=n.l9.displayName;let c=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(n.UC,{ref:a,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r})});c.displayName=n.UC.displayName}},e=>{var a=a=>e(e.s=a);e.O(0,[175,565,219,278,432,786,441,517,358],()=>a(1084)),_N_E=e.O()}]);